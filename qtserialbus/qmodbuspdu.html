<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qmodbuspdu.cpp -->
  <meta name="description" content="QModbusPdu is a abstract container class containing the function code and payload that is stored inside a Modbus ADU.">
  <title>QModbusPdu Class | Qt Serial Bus 6.6.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.6</a></li>
<li><a href="qtserialbus-index.html" translate="no">Qt Serial Bus</a></li>
<li><a href="qtserialbus-module.html" translate="no">C++ Classes</a></li>
<li>QModbusPdu</li>
<li id="buildversion"><a href="qtserialbus-index.html" translate="no">Qt 6.6&#x2e;0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#public-types">Public Types</a></li>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#static-public-members">Static Public Members</a></li>
<li class="level1"><a href="#protected-functions">Protected Functions</a></li>
<li class="level1"><a href="#related-non-members">Related Non-Members</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title" translate="no">QModbusPdu Class</h1>
<!-- $$$QModbusPdu-brief -->
<p>QModbusPdu is a abstract container class containing the function code and payload that is stored inside a Modbus ADU. <a href="#details">More...</a></p>
<!-- @@@QModbusPdu -->
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign">  <span class="preprocessor">#include &lt;QModbusPdu&gt;</span></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> CMake:</td><td class="memItemRight bottomAlign"> find_package(Qt6 REQUIRED COMPONENTS SerialBus) <br/>
target_link_libraries(mytarget PRIVATE Qt6::SerialBus)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> QT += serialbus</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Inherited By:</td><td class="memItemRight bottomAlign"> <p><a href="qmodbusrequest.html" translate="no">QModbusRequest</a> and <a href="qmodbusresponse.html" translate="no">QModbusResponse</a></p>
</td></tr>
</table></div>
<ul>
<li><a href="qmodbuspdu-members.html">List of all members, including inherited members</a></li>
</ul>
<h2 id="public-types">Public Types</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> enum </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#ExceptionCode-enum" translate="no">ExceptionCode</a></b> { IllegalFunction, IllegalDataAddress, IllegalDataValue, ServerDeviceFailure, Acknowledge, &hellip;, ExtendedException }</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> enum </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#FunctionCode-enum" translate="no">FunctionCode</a></b> { Invalid, ReadCoils, ReadDiscreteInputs, ReadHoldingRegisters, ReadInputRegisters, &hellip;, UndefinedFunctionCode }</td></tr>
</table></div>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#QModbusPdu" translate="no">QModbusPdu</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#dtor.QModbusPdu" translate="no">~QModbusPdu</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QByteArray </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#data" translate="no">data</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> qint16 </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#dataSize" translate="no">dataSize</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#decodeData" translate="no">decodeData</a></b>(Args &amp;&amp;... <i>data</i>) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#encodeData" translate="no">encodeData</a></b>(Args... <i>data</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QModbusPdu::ExceptionCode </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#exceptionCode" translate="no">exceptionCode</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QModbusPdu::FunctionCode </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#functionCode" translate="no">functionCode</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#isException" translate="no">isException</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#isValid" translate="no">isValid</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#setData" translate="no">setData</a></b>(const QByteArray &amp;<i>data</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#setFunctionCode" translate="no">setFunctionCode</a></b>(QModbusPdu::FunctionCode <i>code</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> qint16 </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#size" translate="no">size</a></b>() const</td></tr>
</table></div>
<h2 id="static-public-members">Static Public Members</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> const quint8 </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#ExceptionByte-var" translate="no">ExceptionByte</a></b></td></tr>
</table></div>
<h2 id="protected-functions">Protected Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#QModbusPdu-1" translate="no">QModbusPdu</a></b>(QModbusPdu::FunctionCode <i>code</i>, const QByteArray &amp;<i>data</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#QModbusPdu-2" translate="no">QModbusPdu</a></b>(const QModbusPdu &amp;<i>other</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QModbusPdu &amp;</td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#operator-eq" translate="no">operator=</a></b>(const QModbusPdu &amp;<i>other</i>)</td></tr>
</table></div>
<h2 id="related-non-members">Related Non-Members</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> QDebug </td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#operator-lt-lt" translate="no">operator&lt;&lt;</a></b>(QDebug <i>debug</i>, const QModbusPdu &amp;<i>pdu</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QDataStream &amp;</td><td class="memItemRight bottomAlign"><b><a href="qmodbuspdu.html#operator-lt-lt-1" translate="no">operator&lt;&lt;</a></b>(QDataStream &amp;<i>stream</i>, const QModbusPdu &amp;<i>pdu</i>)</td></tr>
</table></div>
<!-- $$$QModbusPdu-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>The class provides access to the raw Modbus protocol packets as defined by the Modbus Application Protocol Specification 1.1b.</p>
</div>
<!-- @@@QModbusPdu -->
<div class="types">
<h2>Member Type Documentation</h2>
<!-- $$$ExceptionCode$$$IllegalFunction$$$IllegalDataAddress$$$IllegalDataValue$$$ServerDeviceFailure$$$Acknowledge$$$ServerDeviceBusy$$$NegativeAcknowledge$$$MemoryParityError$$$GatewayPathUnavailable$$$GatewayTargetDeviceFailedToRespond$$$ExtendedException -->
<h3 class="fn" translate="no" id="ExceptionCode-enum">enum QModbusPdu::<span class="name">ExceptionCode</span></h3>
<p>This enum describes all the possible error conditions as defined by Modbus Exception Codes. They are set by the server after checking the appropriate error conditions in the reply to a request and must be decoded by the client to operate on the exception code.</p>
<div class="table"><table class="valuelist"><tr valign="top" class="odd"><th class="tblConst">Constant</th><th class="tblval">Value</th><th class="tbldscr">Description</th></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::IllegalFunction</code></td><td class="topAlign tblval"><code translate="no">0x01</code></td><td class="topAlign">Function code is not supported by device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::IllegalDataAddress</code></td><td class="topAlign tblval"><code translate="no">0x02</code></td><td class="topAlign">The received data address in the query is not an allowable address for the Modbus server.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::IllegalDataValue</code></td><td class="topAlign tblval"><code translate="no">0x03</code></td><td class="topAlign">The contained value in the request data field is not an allowable value for the Modbus server.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ServerDeviceFailure</code></td><td class="topAlign tblval"><code translate="no">0x04</code></td><td class="topAlign">An irrecoverable error occurred while the server was attempting to perform the requested action.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::Acknowledge</code></td><td class="topAlign tblval"><code translate="no">0x05</code></td><td class="topAlign">Specialized use in conjunction with programming commands.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ServerDeviceBusy</code></td><td class="topAlign tblval"><code translate="no">0x06</code></td><td class="topAlign">The server is engaged in processing a long duration program command.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::NegativeAcknowledge</code></td><td class="topAlign tblval"><code translate="no">0x07</code></td><td class="topAlign">The server cannot perform the program function received in the query. This code is returned for an unsuccessful programming request. The client should request diagnostic or error information from the server.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::MemoryParityError</code></td><td class="topAlign tblval"><code translate="no">0x08</code></td><td class="topAlign">Indicates that the extended file area failed to pass a consistency check. Used in conjunction with function codes 20 and 21. The exception code does not refer to any parity settings of the transmission line but only to the servers' internal memory of file records.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::GatewayPathUnavailable</code></td><td class="topAlign tblval"><code translate="no">0x0A</code></td><td class="topAlign">Indicates that the gateway was unable to allocate an internal communication path from the input port to the output port for processing the request.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::GatewayTargetDeviceFailedToRespond</code></td><td class="topAlign tblval"><code translate="no">0x0B</code></td><td class="topAlign">Indicates that no response was obtained from the target device behind a gateway. Usually this means the target device is not online on the network.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ExtendedException</code></td><td class="topAlign tblval"><code translate="no">0xFF</code></td><td class="topAlign">This is an extended exception as per Modbus specification. Generally this code is used to describe an exception that is otherwise further described.</td></tr>
</table></div>
<!-- @@@ExceptionCode -->
<!-- $$$FunctionCode$$$Invalid$$$ReadCoils$$$ReadDiscreteInputs$$$ReadHoldingRegisters$$$ReadInputRegisters$$$WriteSingleCoil$$$WriteSingleRegister$$$ReadExceptionStatus$$$Diagnostics$$$GetCommEventCounter$$$GetCommEventLog$$$WriteMultipleCoils$$$WriteMultipleRegisters$$$ReportServerId$$$ReadFileRecord$$$WriteFileRecord$$$MaskWriteRegister$$$ReadWriteMultipleRegisters$$$ReadFifoQueue$$$EncapsulatedInterfaceTransport$$$UndefinedFunctionCode -->
<h3 class="fn" translate="no" id="FunctionCode-enum">enum QModbusPdu::<span class="name">FunctionCode</span></h3>
<p>Defines the function code and the implicit type of action required by the server. Not all Modbus devices can handle the same set of function codes.</p>
<div class="table"><table class="valuelist"><tr valign="top" class="odd"><th class="tblConst">Constant</th><th class="tblval">Value</th><th class="tbldscr">Description</th></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::Invalid</code></td><td class="topAlign tblval"><code translate="no">0x00</code></td><td class="topAlign">Set by the default constructor, do not use.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ReadCoils</code></td><td class="topAlign tblval"><code translate="no">0x01</code></td><td class="topAlign">Requests the status of one or more coils from a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ReadDiscreteInputs</code></td><td class="topAlign tblval"><code translate="no">0x02</code></td><td class="topAlign">Requests the status of one or more input registers from a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ReadHoldingRegisters</code></td><td class="topAlign tblval"><code translate="no">0x03</code></td><td class="topAlign">Requests the status of one or more holding register values from a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ReadInputRegisters</code></td><td class="topAlign tblval"><code translate="no">0x04</code></td><td class="topAlign">Requests the status of one or more input register values from a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::WriteSingleCoil</code></td><td class="topAlign tblval"><code translate="no">0x05</code></td><td class="topAlign">Requests to write a single coil on a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::WriteSingleRegister</code></td><td class="topAlign tblval"><code translate="no">0x06</code></td><td class="topAlign">Requests to write a single holding register on a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ReadExceptionStatus</code></td><td class="topAlign tblval"><code translate="no">0x07</code></td><td class="topAlign">Requests the status of the eight Exception Status outputs on a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::Diagnostics</code></td><td class="topAlign tblval"><code translate="no">0x08</code></td><td class="topAlign">Used to provide a series of tests for checking the client server communication system, or checking internal</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::GetCommEventCounter</code></td><td class="topAlign tblval"><code translate="no">0x0B</code></td><td class="topAlign">Requests a status word and an event count from the device's communication event counter.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::GetCommEventLog</code></td><td class="topAlign tblval"><code translate="no">0x0C</code></td><td class="topAlign">Requests a status word, event count, message count, and a field of event bytes from a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::WriteMultipleCoils</code></td><td class="topAlign tblval"><code translate="no">0x0F</code></td><td class="topAlign">Requests to write one or more coils on a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::WriteMultipleRegisters</code></td><td class="topAlign tblval"><code translate="no">0x10</code></td><td class="topAlign">Requests to write one or more holding registers on a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ReportServerId</code></td><td class="topAlign tblval"><code translate="no">0x11</code></td><td class="topAlign">Requests the description of the type, the current status, and other information specific to a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ReadFileRecord</code></td><td class="topAlign tblval"><code translate="no">0x14</code></td><td class="topAlign">Requests a file record read.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::WriteFileRecord</code></td><td class="topAlign tblval"><code translate="no">0x15</code></td><td class="topAlign">Requests a file record write.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::MaskWriteRegister</code></td><td class="topAlign tblval"><code translate="no">0x16</code></td><td class="topAlign">Requests to modify the contents of a specified holding register using a combination of an AND or OR mask, and the register's current contents.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ReadWriteMultipleRegisters</code></td><td class="topAlign tblval"><code translate="no">0x17</code></td><td class="topAlign">Requests the status of one or more holding register and at the same time to write one or more holding registers on a device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::ReadFifoQueue</code></td><td class="topAlign tblval"><code translate="no">0x18</code></td><td class="topAlign">Requests to read the contents of a First-In-First-Out (FIFO) queue of register in a remote device.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::EncapsulatedInterfaceTransport</code></td><td class="topAlign tblval"><code translate="no">0x2B</code></td><td class="topAlign">Please refer to Annex A of the Modbus specification.</td></tr>
<tr><td class="topAlign"><code translate="no">QModbusPdu::UndefinedFunctionCode</code></td><td class="topAlign tblval"><code translate="no">0x100</code></td><td class="topAlign">Do not use.</td></tr>
</table></div>
<!-- @@@FunctionCode -->
</div>
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QModbusPdu[overload1]$$$QModbusPdu -->
<h3 class="fn" translate="no" id="QModbusPdu"><code translate="no">[constexpr noexcept] </code>QModbusPdu::<span class="name">QModbusPdu</span>()</h3>
<p>Constructs an invalid QModbusPdu.</p>
<!-- @@@QModbusPdu -->
<!-- $$$QModbusPdu$$$QModbusPduQModbusPdu::FunctionCodeconstQByteArray& -->
<h3 class="fn" translate="no" id="QModbusPdu-1"><code translate="no">[protected] </code>QModbusPdu::<span class="name">QModbusPdu</span>(<span class="type"><a href="qmodbuspdu.html#FunctionCode-enum" translate="no">QModbusPdu::FunctionCode</a></span> <i>code</i>, const <span class="type"><a href="../qtcore/qbytearray.html" translate="no">QByteArray</a></span> &amp;<i>data</i>)</h3>
<p>Constructs a QModbusPdu with function code set to <i translate="no">code</i> and payload set to <i translate="no">data</i>. The data is expected to be stored in big-endian byte order already.</p>
<!-- @@@QModbusPdu -->
<!-- $$$QModbusPdu$$$QModbusPduconstQModbusPdu& -->
<h3 class="fn" translate="no" id="QModbusPdu-2"><code translate="no">[noexcept protected] </code>QModbusPdu::<span class="name">QModbusPdu</span>(const <span class="type"><a href="qmodbuspdu.html#QModbusPdu" translate="no">QModbusPdu</a></span> &amp;<i>other</i>)</h3>
<p>Constructs a QModbusPdu that is a copy of <i translate="no">other</i>.</p>
<!-- @@@QModbusPdu -->
<!-- $$$~QModbusPdu[overload1]$$$~QModbusPdu -->
<h3 class="fn" translate="no" id="dtor.QModbusPdu"><code translate="no">[virtual noexcept] </code>QModbusPdu::<span class="name">~QModbusPdu</span>()</h3>
<p>Destroys a <a href="qmodbuspdu.html" translate="no">QModbusPdu</a>.</p>
<!-- @@@~QModbusPdu -->
<!-- $$$data[overload1]$$$data -->
<h3 class="fn" translate="no" id="data"><span class="type"><a href="../qtcore/qbytearray.html" translate="no">QByteArray</a></span> QModbusPdu::<span class="name">data</span>() const</h3>
<p>Returns the PDU's payload, excluding the function code. The payload is stored in big-endian byte order.</p>
<p><b>See also </b><a href="qmodbuspdu.html#setData" translate="no">setData</a>().</p>
<!-- @@@data -->
<!-- $$$dataSize[overload1]$$$dataSize -->
<h3 class="fn" translate="no" id="dataSize"><span class="type"><a href="../qtcore/qttypes.html#qint16-typedef" translate="no">qint16</a></span> QModbusPdu::<span class="name">dataSize</span>() const</h3>
<p>Returns the PDU's data size, excluding the function code.</p>
<!-- @@@dataSize -->
<!-- $$$decodeData[overload1]$$$decodeDataArgs&&... -->
<h3 class="fn" translate="no" id="decodeData">template &lt;typename Args&gt; <span class="type">void</span> QModbusPdu::<span class="name">decodeData</span>(<span class="type">Args</span> &amp;&amp;... <i>data</i>) const</h3>
<p>Converts the payload into host endianness and reads it into <i translate="no">data</i>. Data can be a variable length argument list.</p>
<pre class="cpp" translate="no">
 <span class="type">QModbusResponsePdu</span> response(<span class="type"><a href="qmodbuspdu.html#QModbusPdu" translate="no">QModbusPdu</a></span><span class="operator">::</span>ReportServerId);
 response<span class="operator">.</span>encodeData(<span class="type"><a href="../qtcore/qttypes.html#quint8-typedef" translate="no">quint8</a></span>(<span class="number">0x02</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qttypes.html#quint8-typedef" translate="no">quint8</a></span>(<span class="number">0x01</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qttypes.html#quint8-typedef" translate="no">quint8</a></span>(<span class="number">0xff</span>));
 <span class="type"><a href="../qtcore/qttypes.html#quint8-typedef" translate="no">quint8</a></span> count<span class="operator">,</span> id<span class="operator">,</span> run;
 response<span class="operator">.</span>decodeData(<span class="operator">&amp;</span>count<span class="operator">,</span> <span class="operator">&amp;</span>id<span class="operator">,</span> <span class="operator">&amp;</span>run);
</pre>
<div class="admonition note">
<p><b>Note: </b>Usage is limited <code translate="no">quint8</code> and <code translate="no">quint16</code> only. This is because <code translate="no">QDataStream</code> stream operators will not only append raw data, but also e.g&#x2e; size, count, etc. for complex types.</p>
</div>
<!-- @@@decodeData -->
<!-- $$$encodeData[overload1]$$$encodeDataArgs... -->
<h3 class="fn" translate="no" id="encodeData">template &lt;typename Args&gt; <span class="type">void</span> QModbusPdu::<span class="name">encodeData</span>(<span class="type">Args</span>... <i>data</i>)</h3>
<p>Sets the payload to <i translate="no">data</i>. The data is converted and stored in big-endian byte order.</p>
<pre class="cpp" translate="no">
 <span class="type">QModbusRequestPdu</span> request(<span class="type"><a href="qmodbuspdu.html#QModbusPdu" translate="no">QModbusPdu</a></span><span class="operator">::</span>ReadCoils);
 <span class="comment">// starting address and quantity of coils</span>
 request<span class="operator">.</span>encodeData(<span class="type"><a href="../qtcore/qttypes.html#quint16-typedef" translate="no">quint16</a></span>(<span class="number">0x0c</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qttypes.html#quint16-typedef" translate="no">quint16</a></span>(<span class="number">0x0a</span>));
</pre>
<div class="admonition note">
<p><b>Note: </b>Usage is limited <code translate="no">quint8</code> and <code translate="no">quint16</code> only. This is because <code translate="no">QDataStream</code> stream operators will not only append raw data, but also e.g&#x2e; size, count, etc. for complex types.</p>
</div>
<!-- @@@encodeData -->
<!-- $$$exceptionCode[overload1]$$$exceptionCode -->
<h3 class="fn" translate="no" id="exceptionCode"><span class="type"><a href="qmodbuspdu.html#ExceptionCode-enum" translate="no">QModbusPdu::ExceptionCode</a></span> QModbusPdu::<span class="name">exceptionCode</span>() const</h3>
<p>Returns the response's exception code.</p>
<!-- @@@exceptionCode -->
<!-- $$$functionCode[overload1]$$$functionCode -->
<h3 class="fn" translate="no" id="functionCode"><span class="type"><a href="qmodbuspdu.html#FunctionCode-enum" translate="no">QModbusPdu::FunctionCode</a></span> QModbusPdu::<span class="name">functionCode</span>() const</h3>
<p>Returns the PDU's function code.</p>
<p><b>See also </b><a href="qmodbuspdu.html#setFunctionCode" translate="no">setFunctionCode</a>().</p>
<!-- @@@functionCode -->
<!-- $$$isException[overload1]$$$isException -->
<h3 class="fn" translate="no" id="isException"><span class="type">bool</span> QModbusPdu::<span class="name">isException</span>() const</h3>
<p>Returns true if the PDU contains an exception code; otherwise false.</p>
<!-- @@@isException -->
<!-- $$$isValid[overload1]$$$isValid -->
<h3 class="fn" translate="no" id="isValid"><span class="type">bool</span> QModbusPdu::<span class="name">isValid</span>() const</h3>
<p>Returns true if the PDU is valid; otherwise false.</p>
<p>A PDU is considered valid if the message code is in the range of 1 to 255 decimal and the PDU's compound size (function code + data) does not exceed 253 bytes. A default constructed PDU is invalid.</p>
<!-- @@@isValid -->
<!-- $$$setData[overload1]$$$setDataconstQByteArray& -->
<h3 class="fn" translate="no" id="setData"><span class="type">void</span> QModbusPdu::<span class="name">setData</span>(const <span class="type"><a href="../qtcore/qbytearray.html" translate="no">QByteArray</a></span> &amp;<i>data</i>)</h3>
<p>Sets the PDU's function payload to <i translate="no">data</i>. The data is expected to be stored in big-endian byte order already.</p>
<p><b>See also </b><a href="qmodbuspdu.html#data" translate="no">data</a>().</p>
<!-- @@@setData -->
<!-- $$$setFunctionCode[overload1]$$$setFunctionCodeQModbusPdu::FunctionCode -->
<h3 class="fn" translate="no" id="setFunctionCode"><code translate="no">[virtual] </code><span class="type">void</span> QModbusPdu::<span class="name">setFunctionCode</span>(<span class="type"><a href="qmodbuspdu.html#FunctionCode-enum" translate="no">QModbusPdu::FunctionCode</a></span> <i>code</i>)</h3>
<p>Sets the PDU's function code to <i translate="no">code</i>.</p>
<p><b>See also </b><a href="qmodbuspdu.html#functionCode" translate="no">functionCode</a>().</p>
<!-- @@@setFunctionCode -->
<!-- $$$size[overload1]$$$size -->
<h3 class="fn" translate="no" id="size"><span class="type"><a href="../qtcore/qttypes.html#qint16-typedef" translate="no">qint16</a></span> QModbusPdu::<span class="name">size</span>() const</h3>
<p>Returns the PDU's full size, including function code and data size.</p>
<!-- @@@size -->
<!-- $$$operator=[overload1]$$$operator=constQModbusPdu& -->
<h3 class="fn" translate="no" id="operator-eq"><code translate="no">[noexcept protected] </code><span class="type"><a href="qmodbuspdu.html#QModbusPdu" translate="no">QModbusPdu</a></span> &amp;QModbusPdu::<span class="name">operator=</span>(const <span class="type"><a href="qmodbuspdu.html#QModbusPdu" translate="no">QModbusPdu</a></span> &amp;<i>other</i>)</h3>
<p>Makes a copy of the <i translate="no">other</i> and assigns it to this <a href="qmodbuspdu.html" translate="no">QModbusPdu</a> object.</p>
<!-- @@@operator= -->
</div>
<div class="vars">
<h2>Member Variable Documentation</h2>
<!-- $$$ExceptionByte -->
<h3 class="fn" translate="no" id="ExceptionByte-var">const <span class="type"><a href="../qtcore/qttypes.html#quint8-typedef" translate="no">quint8</a></span> QModbusPdu::<span class="name">ExceptionByte</span></h3>
<p>The variable is initialized to 0x80.</p>
<p>Exceptions are reported in a defined packet format. A function code is returned to the requesting client equal to the original function code, except with its most significant bit set. This is equivalent to adding 0x80 to the value of the original function code.</p>
<p>This field may be used to mask the exception bit in the function field of a raw Modbus packet.</p>
<!-- @@@ExceptionByte -->
</div>
<div class="relnonmem">
<h2>Related Non-Members</h2>
<!-- $$$operator<<[overload1]$$$operator<<QDebugconstQModbusPdu& -->
<h3 class="fn" translate="no" id="operator-lt-lt"><span class="type"><a href="../qtcore/qdebug.html" translate="no">QDebug</a></span> <span class="name">operator&lt;&lt;</span>(<span class="type"><a href="../qtcore/qdebug.html" translate="no">QDebug</a></span> <i>debug</i>, const <span class="type"><a href="qmodbuspdu.html#QModbusPdu" translate="no">QModbusPdu</a></span> &amp;<i>pdu</i>)</h3>
<p>Writes the Modbus <i translate="no">pdu</i> to the <i translate="no">debug</i> stream.</p>
<!-- @@@operator<< -->
<!-- $$$operator<<$$$operator<<QDataStream&constQModbusPdu& -->
<h3 class="fn" translate="no" id="operator-lt-lt-1"><span class="type"><a href="../qtcore/qdatastream.html" translate="no">QDataStream</a></span> &amp;<span class="name">operator&lt;&lt;</span>(<span class="type"><a href="../qtcore/qdatastream.html" translate="no">QDataStream</a></span> &amp;<i>stream</i>, const <span class="type"><a href="qmodbuspdu.html#QModbusPdu" translate="no">QModbusPdu</a></span> &amp;<i>pdu</i>)</h3>
<p>Writes a <i translate="no">pdu</i> to the <i translate="no">stream</i> and returns a reference to the stream.</p>
<!-- @@@operator<< -->
</div>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2023 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br/>    Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
