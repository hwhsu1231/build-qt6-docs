<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- nmea.qdoc -->
  <meta name="description" content="Reads the NMEA stream to provide position updates.">
  <title>Qt Positioning NMEA plugin | Qt Positioning 6.6.2</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.6</a></li>
<li><a href="qtpositioning-index.html" translate="no">Qt Positioning</a></li>
<li>Qt Positioning NMEA plugin</li>
<li id="buildversion"><a href="qtpositioning-index.html" translate="no">Qt 6.6.2 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#overview">Overview</a></li>
<li class="level1"><a href="#parameters">Parameters</a></li>
<li class="level1"><a href="#position-source-usage-example">Position source usage example</a></li>
<li class="level2"><a href="#qml">QML</a></li>
<li class="level2"><a href="#c">C++</a></li>
<li class="level1"><a href="#satellite-information-source-usage-example">Satellite information source usage example</a></li>
<li class="level2"><a href="#qml">QML</a></li>
<li class="level2"><a href="#c">C++</a></li>
<li class="level2"><a href="#settings-custom-simulation-speed">Settings Custom Simulation Speed</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Qt Positioning NMEA plugin</h1>
<!-- $$$position-plugin-nmea.html-description -->
<div class="descr" id="details">
<h2 id="overview">Overview</h2>
<p>Included with Qt Positioning is a position plugin which parses NMEA sentences into position updates. This plugin can use serial port, socket or file as a source.</p>
<p>This plugin can be loaded by using the provider name <b>nmea</b>.</p>
<h2 id="parameters">Parameters</h2>
<p>The following table lists parameters that <i>can</i> be passed to the nmea plugin.</p>
<div class="table"><table class="generic">
 <thead><tr class="qt-style"><th >Parameter</th><th >Description</th></tr></thead>
<tr valign="top" class="odd"><td >nmea.source</td><td >The source that will be used to get NMEA data.</td></tr>
<tr valign="top" class="even"><td >nmea.baudrate</td><td >The baud rate to be used by the serial port connection, expressed with a positive integer number. Typically it should be one of the values from the <a href="../qtserialport/qserialport.html#BaudRate-enum" translate="no">QSerialPort::BaudRate</a> enum. If the parameter is not specified or does not contain a positive integer, the default value of <code translate="no">4800</code> is used.</td></tr>
<tr valign="top" class="odd"><td >nmea.satellite_info_simulation_interval</td><td >The interval for reading satellite information data from the file in simulation mode.</td></tr>
</table></div>
<p>Different sources require different ways of providing the data. The following table lists different ways of providing <code translate="no">nmea.source</code> parameter for socket, serial port and file inputs.</p>
<div class="table"><table class="generic">
 <thead><tr class="qt-style"><th >Scheme</th><th >Example</th><th >Description</th></tr></thead>
<tr valign="top" class="odd"><td >socket://hostname:port</td><td ><code translate="no">socket://localhost:12345</code></td><td >Use <b>socket:</b> keyword to specify that you want to get the nmea data from the socket. A TCP socket will be created, which will try to connect to host <code translate="no">hostname</code> using port <code translate="no">port</code>. Upon successful connection a text NMEA stream is expected to be received from the server.</td></tr>
<tr valign="top" class="even"><td  rowspan=" 3">serial:portname</td><td ><code translate="no">serial:/dev/ttyUSB0</code></td><td  rowspan=" 3">Use <b>serial:</b> keyword to specify that you want to get the nmea data from the serial port. The plugin will try to establish a connection to port <code translate="no">portname</code> with a default baudrate = 4800 Bd (the baudrate value can be specified using <b>nmea.baudrate</b> parameter). Upon successful connection a text NMEA stream is expected to be received from the serial port. If you use <b>serial:</b> without any port name, the plugin will try to find one of the well known serial devices using vendor identifier. Note however that this is not a recommended way of using the serial port connection, as the list of well-known devices is small and most probably does not include your hardware.</td></tr>
<tr valign="top" class="odd"><td ><code translate="no">serial:COM1</code></td></tr>
<tr valign="top" class="even"><td ><code translate="no">serial:</code></td></tr>
<tr valign="top" class="odd"><td >filepath</td><td ><code translate="no">/home/user/nmealog.txt</code></td><td  rowspan=" 2">Use <b>file:///</b> or just full file path to specify a path to a local file.</td></tr>
<tr valign="top" class="even"><td >file:///filepath</td><td ><code translate="no">file:///home/user/nmealog.txt</code></td></tr>
<tr valign="top" class="odd"><td >qrc:///filepath</td><td ><code translate="no">qrc:///nmealog.txt</code></td><td >Use <b>qrc:///</b> prefix to specify a path to a file in the application resources.</td></tr>
</table></div>
<div class="admonition note">
<p><b>Note: </b>If <code translate="no">nmea.source</code> parameter is not specified, the plugin will try to locate one of the well-known serial devices (as if <code translate="no">nmea.source = serial:</code> was specified).</p>
</div>
<h2 id="position-source-usage-example">Position source usage example</h2>
<p>The following examples show how to create a <b>nmea</b> <a href="qml-qtpositioning-positionsource.html" translate="no">PositionSource</a> using different data sources.</p>
<h3 id="qml">QML</h3>
<pre class="cpp" translate="no">
 <span class="comment">// text file</span>
 PositionSource {
     name: <span class="string">&quot;nmea&quot;</span>
     PluginParameter { name: <span class="string">&quot;nmea.source&quot;</span>; value: <span class="string">&quot;qrc:///nmealog.txt&quot;</span> }
 }

 <span class="comment">// socket</span>
 PositionSource {
     name: <span class="string">&quot;nmea&quot;</span>
     PluginParameter { name: <span class="string">&quot;nmea.source&quot;</span>; value: <span class="string">&quot;socket://localhost:22222&quot;</span> }
 }

 <span class="comment">// serial port</span>
 PositionSource {
     name: <span class="string">&quot;nmea&quot;</span>
     PluginParameter { name: <span class="string">&quot;nmea.source&quot;</span>; value: <span class="string">&quot;serial:/dev/ttyACM0&quot;</span> }
     PluginParameter { name: <span class="string">&quot;nmea.baudrate&quot;</span>; value: <span class="number">4800</span> }
 }
</pre>
<h3 id="c">C++</h3>
<pre class="cpp" translate="no">
 <span class="comment">// text file</span>
 <span class="type"><a href="../qtcore/qvariant.html#QVariantMap-typedef" translate="no">QVariantMap</a></span> params;
 params<span class="operator">[</span><span class="string">&quot;nmea.source&quot;</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">&quot;qrc:///nmealog.txt&quot;</span>;
 <span class="type"><a href="qgeopositioninfosource.html" translate="no">QGeoPositionInfoSource</a></span> <span class="operator">*</span>textPositionSource <span class="operator">=</span> <span class="type"><a href="qgeopositioninfosource.html" translate="no">QGeoPositionInfoSource</a></span><span class="operator">::</span>createSource(<span class="string">&quot;nmea&quot;</span><span class="operator">,</span> params<span class="operator">,</span> <span class="keyword">this</span>);

 <span class="comment">// socket</span>
 params<span class="operator">[</span><span class="string">&quot;nmea.source&quot;</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">&quot;socket://localhost:22222&quot;</span>;
 <span class="type"><a href="qgeopositioninfosource.html" translate="no">QGeoPositionInfoSource</a></span> <span class="operator">*</span>socketPositionSource <span class="operator">=</span> <span class="type"><a href="qgeopositioninfosource.html" translate="no">QGeoPositionInfoSource</a></span><span class="operator">::</span>createSource(<span class="string">&quot;nmea&quot;</span><span class="operator">,</span> params<span class="operator">,</span> <span class="keyword">this</span>);

 <span class="comment">// serial port</span>
 params<span class="operator">[</span><span class="string">&quot;nmea.source&quot;</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">&quot;serial:/dev/ttyACM0&quot;</span>;
 params<span class="operator">[</span><span class="string">&quot;nmea.baudrate&quot;</span><span class="operator">]</span> <span class="operator">=</span> <span class="number">4800</span>;
 <span class="type"><a href="qgeopositioninfosource.html" translate="no">QGeoPositionInfoSource</a></span> <span class="operator">*</span>serialPositionSource <span class="operator">=</span> <span class="type"><a href="qgeopositioninfosource.html" translate="no">QGeoPositionInfoSource</a></span><span class="operator">::</span>createSource(<span class="string">&quot;nmea&quot;</span><span class="operator">,</span> params<span class="operator">,</span> <span class="keyword">this</span>);
</pre>
<div class="admonition note">
<p><b>Note: </b>Once a <a href="qml-qtpositioning-positionsource.html" translate="no">PositionSource</a> is created, it can't be reconfigured to use other type of source data.</p>
</div>
<h2 id="satellite-information-source-usage-example">Satellite information source usage example</h2>
<p>Apart from the position information, <b>nmea</b> plugin is also capable of providing satellite information.</p>
<h3 id="qml">QML</h3>
<pre class="cpp" translate="no">
 <span class="comment">// serial port</span>
 SatelliteSource {
     name: <span class="string">&quot;nmea&quot;</span>
     PluginParameter { name: <span class="string">&quot;nmea.source&quot;</span>; value: <span class="string">&quot;serial:/dev/ttyUSB0&quot;</span> }
     PluginParameter { name: <span class="string">&quot;nmea.baudrate&quot;</span>; value: <span class="number">9600</span> }
 }

 <span class="comment">// socket</span>
 SatelliteSource {
     name: <span class="string">&quot;nmea&quot;</span>
     PluginParameter { name: <span class="string">&quot;nmea.source&quot;</span>; value: <span class="string">&quot;socket://localhost:22222&quot;</span> }
 }
</pre>
<h3 id="c">C++</h3>
<pre class="cpp" translate="no">
 <span class="comment">// serial port</span>
 <span class="type"><a href="../qtcore/qvariant.html#QVariantMap-typedef" translate="no">QVariantMap</a></span> parameters;
 parameters<span class="operator">[</span><span class="string">&quot;nmea.source&quot;</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">&quot;serial:/dev/ttyUSB0&quot;</span>;
 params<span class="operator">[</span><span class="string">&quot;nmea.baudrate&quot;</span><span class="operator">]</span> <span class="operator">=</span> <span class="number">9600</span>;
 <span class="type"><a href="qgeosatelliteinfosource.html" translate="no">QGeoSatelliteInfoSource</a></span> <span class="operator">*</span>serialSource <span class="operator">=</span> <span class="type"><a href="qgeosatelliteinfosource.html" translate="no">QGeoSatelliteInfoSource</a></span><span class="operator">::</span>createSource(<span class="string">&quot;nmea&quot;</span><span class="operator">,</span> parameters<span class="operator">,</span> <span class="keyword">this</span>);

 <span class="comment">// socket</span>
 parameters<span class="operator">[</span><span class="string">&quot;nmea.source&quot;</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">&quot;socket://localhost:22222&quot;</span>;
 <span class="type"><a href="qgeosatelliteinfosource.html" translate="no">QGeoSatelliteInfoSource</a></span> <span class="operator">*</span>socketSource <span class="operator">=</span> <span class="type"><a href="qgeosatelliteinfosource.html" translate="no">QGeoSatelliteInfoSource</a></span><span class="operator">::</span>createSource(<span class="string">&quot;nmea&quot;</span><span class="operator">,</span> parameters<span class="operator">,</span> <span class="keyword">this</span>);
</pre>
<h3 id="settings-custom-simulation-speed">Settings Custom Simulation Speed</h3>
<p>If you want to use <a href="qgeosatelliteinfosource.html" translate="no">QGeoSatelliteInfoSource</a> to read file with NMEA stream, you can also use additional parameter <code translate="no">&quot;nmea.satellite_info_simulation_interval&quot;</code>. This parameter is used to specify the playback rate (in milliseconds) for the satellite info messages. The minimum allowed frequency is specified by <a href="qgeosatelliteinfosource.html#minimumUpdateInterval-prop" translate="no">minimumUpdateInterval</a>(). If you specify a smaller value, it will be ignored. If no value is specified, the default value is <code translate="no">qMax(100, minimumUpdateInterval())</code>. At runtime <a href="qnmeasatelliteinfosource.html#setBackendProperty" translate="no">QNmeaSatelliteInfoSource::setBackendProperty</a>() method can be used to update this parameter.</p>
<pre class="cpp" translate="no">
 <span class="comment">// file</span>
 <span class="type"><a href="../qtcore/qvariant.html#QVariantMap-typedef" translate="no">QVariantMap</a></span> parameters;
 parameters<span class="operator">[</span><span class="string">&quot;nmea.source&quot;</span><span class="operator">]</span> <span class="operator">=</span> <span class="string">&quot;qrc:///nmealog.txt&quot;</span>;
 parameters<span class="operator">[</span><span class="string">&quot;nmea.satellite_info_simulation_interval&quot;</span><span class="operator">]</span> <span class="operator">=</span> <span class="number">1000</span>;
 <span class="type"><a href="qgeosatelliteinfosource.html" translate="no">QGeoSatelliteInfoSource</a></span> <span class="operator">*</span>fileSource <span class="operator">=</span> <span class="type"><a href="qgeosatelliteinfosource.html" translate="no">QGeoSatelliteInfoSource</a></span><span class="operator">::</span>createSource(<span class="string">&quot;nmea&quot;</span><span class="operator">,</span> parameters<span class="operator">,</span> <span class="keyword">this</span>);
</pre>
<p>This parameter is not applicable to position source because NMEA protocol already has timestamps in position messages. These timestamps are used to simulate the correct message rate while using <a href="qgeopositioninfosource.html" translate="no">QGeoPositionInfoSource</a> with file as a data source.</p>
<div class="admonition note">
<p><b>Note: </b>Once a <a href="qgeosatelliteinfosource.html" translate="no">QGeoSatelliteInfoSource</a> is created, it can't be reconfigured to use other type of source data.</p>
</div>
</div>
<!-- @@@position-plugin-nmea.html -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
