<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qtquick3dphysics-cooking.qdoc -->
  <meta name="description" content="An explanation of how Qt Quick 3D Physics handles meshes and cooking.">
  <title>Qt Quick 3D Physics Cooking | Qt Quick 3D Physics 6.6.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.6</a></li>
<li><a href="qtquick3dphysics-index.html" translate="no">Qt Quick 3D Physics</a></li>
<li>Qt Quick 3D Physics Cooking</li>
<li id="buildversion"><a href="qtquick3dphysics-index.html" translate="no">Qt Quick 3D Physics | Commercial or GPLv3</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#cache-directory">Cache directory</a></li>
<li class="level1"><a href="#cooker-tool">Cooker tool</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Qt Quick 3D Physics Cooking</h1>
<!-- $$$qtquick3dphysics-cooking.html-description -->
<div class="descr" id="details">
<p>When using a mesh as a collision shape it needs to be processed and converted into a data format for efficient collision detection. This is referred to as 'cooking'. There are three shape types that need to be cooked before they can be used, namely <a href="qml-qtquick3d-physics-convexmeshshape.html" translate="no">ConvexMeshShape</a>, <a href="qml-qtquick3d-physics-trianglemeshshape.html" translate="no">TriangleMeshShape</a> and <a href="qml-qtquick3d-physics-heightfieldshape.html" translate="no">HeightFieldShape</a>. The cooking happens automatically on the first frame of the simulation when using any of these shapes. This cooking can incur a noticeable performance cost so to enable faster loading times it is possible to precook the meshes and load them directly. There are two ways to do this, namely using a cache directory or the cooker tool.</p>
<h2 id="cache-directory">Cache directory</h2>
<p>To use the cache directory set the <code translate="no">QT_PHYSICS_CACHE_PATH</code> environment variable to a directory of choice. When the application runs for the first time all used meshes will be cooked and stored in this directory. The following times the application runs, the cooked meshes will be read from disk instead of being cooked.</p>
<h2 id="cooker-tool">Cooker tool</h2>
<p>The other way is to use the <code translate="no">cooker</code> tool. Build it, then simply call the tool with the mesh or heightfield image as the input argument:</p>
<pre class="cpp" translate="no">
 cooker input<span class="operator">.</span>mesh
</pre>
<p>or</p>
<pre class="cpp" translate="no">
 cooker input<span class="operator">.</span>png
</pre>
<p>If the input is a mesh it will generate two files:</p>
<ul>
<li><code translate="no">input.cooked.tri</code></li>
<li><code translate="no">input.cooked.cvx</code></li>
</ul>
<p>One file is a cooked triangle mesh and the other a cooked convex mesh. These can then simply be used as the sources of <a href="qml-qtquick3d-physics-trianglemeshshape.html#source-prop" translate="no">TriangleMeshShape::source</a> and <a href="qml-qtquick3d-physics-convexmeshshape.html#source-prop" translate="no">ConvexMeshShape::source</a> and the meshes will be loaded without any need for cooking. Similiarily, if the input is an image file a heightfield is generated called <code translate="no">input.cooked.hf</code> which can then be loaded by referencing it in the <a href="qml-qtquick3d-physics-heightfieldshape.html#source-prop" translate="no">HeightFieldShape::source</a> property.</p>
</div>
<!-- @@@qtquick3dphysics-cooking.html -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2023 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br/>    Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
