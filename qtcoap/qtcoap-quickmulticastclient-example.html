<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- quickmulticastclient.qdoc -->
  <meta name="description" content="Using the CoAP client for a multicast resource discovery with a Qt Quick user interface.">
  <title>Quick CoAP Multicast Discovery | Qt CoAP 6.6.2</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.6</a></li>
<li><a href="qtcoap-index.html" translate="no">Qt CoAP</a></li>
<li><a href="qtcoap-examples.html" translate="no">Qt CoAP Examples</a></li>
<li>Quick CoAP Multicast Discovery</li>
<li id="buildversion"><a href="qtcoap-index.html" translate="no">Qt 6.6.2 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#running-the-example">Running the Example</a></li>
<li class="level1"><a href="#setting-up-a-coap-server">Setting Up a CoAP Server</a></li>
<li class="level2"><a href="#using-the-docker-based-test-server">Using the Docker-based Test Server</a></li>
<li class="level1"><a href="#exposign-c-classes-to-qml">Exposign C++ Classes to QML</a></li>
<li class="level1"><a href="#adjusting-build-files">Adjusting Build Files</a></li>
<li class="level2"><a href="#cmake-build">CMake Build</a></li>
<li class="level2"><a href="#qmake-build">qmake Build</a></li>
<li class="level1"><a href="#using-new-qml-types">Using New QML Types</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Quick CoAP Multicast Discovery</h1>
<!-- $$$quickmulticastclient-brief -->
<p>Using the CoAP client for a multicast resource discovery with a Qt Quick user interface.</p>
<!-- @@@quickmulticastclient -->
<!-- $$$quickmulticastclient-description -->
<div class="descr" id="details">
<p class="centerAlign"><img src="images/quickmulticastclient.webp" alt="" /></p><p>The <i>Quick CoAP Multicast Discovery</i> example demonstrates how to register <a href="qcoapclient.html" translate="no">QCoapClient</a> as a QML type and use it in a Qt Quick application for CoAP multicast resource discovery.</p>
<div class="admonition note">
<p><b>Note: </b>Qt CoAP does not provide a QML API in its current version. However, you can make the C++ classes of the module available to QML as shown in this example.</p>
</div>
<h4 id="running-the-example">Running the Example</h4>
<p>To run the example from <a href="https://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b translate="no">Welcome</b> mode and select the example from <b translate="no">Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<h4 id="setting-up-a-coap-server">Setting Up a CoAP Server</h4>
<p>To run the example application, you first need to set up and start at least one CoAP server supporting multicast resource discovery. You have the following options:</p>
<ul>
<li>Manually build and run CoAP servers using <a href="https://github.com/obgm/libcoap" translate="no">libcoap</a>, <a href="https://github.com/eclipse/californium/" translate="no">Californium</a>, or any other CoAP server implementation, which supports multicast and resource discovery features.</li>
<li>Use the ready Docker image available at Docker Hub, which builds and starts CoAP server based on Californium's <a href="https://github.com/eclipse/californium/tree/2.0.0/demo-apps/cf-helloworld-server" translate="no">multicast server example</a>.</li>
</ul>
<h5 id="using-the-docker-based-test-server">Using the Docker-based Test Server</h5>
<p>The following command pulls the docker container for the CoAP server from the Docker Hub and starts it:</p>
<pre class="cpp plain" translate="no">
 docker run --name coap-multicast-server -d --rm --net=host tqtc/coap-multicast-test-server:californium-2.0.0
</pre>
<div class="admonition note">
<p><b>Note: </b>You can run more than one multicast CoAP servers (on the same host or other hosts in the network) by passing a different <code translate="no">--name</code> to the command above.</p>
</div>
<p>To terminate the docker container after usage, first obtain the container's ID by executing the <code translate="no">docker ps</code> command. The output will look like this:</p>
<pre class="cpp plain" translate="no">
 $ docker ps
 CONTAINER ID   IMAGE
 8b991fae7789   tqtc/coap-multicast-test-server:californium-2.0.0
</pre>
<p>After that, use this ID to stop the container:</p>
<pre class="cpp plain" translate="no">
 docker stop &lt;container_id&gt;
</pre>
<h4 id="exposign-c-classes-to-qml">Exposign C++ Classes to QML</h4>
<p>In this example, you need to expose the <a href="qcoapresource.html" translate="no">QCoapResource</a> and <a href="qcoapclient.html" translate="no">QCoapClient</a> classes, as well as the <a href="qtcoap.html" translate="no">QtCoap</a> namespace, to QML. To achieve this, create custom wrapper classes and use the special <a href="../qtqml/qtqml-cppintegration-definetypes.html" translate="no">registration macros</a>.</p>
<p>Create the <code translate="no">QmlCoapResource</code> class as a wrapper around <a href="qcoapresource.html" translate="no">QCoapResource</a>. Use the <a href="../qtcore/qobject.html#Q_PROPERTY" translate="no">Q_PROPERTY</a> macro to make several properties accessible from QML. The class does not need to be directly instantiable from QML, so use the <a href="../qtqml/qqmlengine.html#QML_ANONYMOUS" translate="no">QML_ANONYMOUS</a> macro to register it.</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> QmlCoapResource : <span class="keyword">public</span> <span class="type"><a href="qcoapresource.html" translate="no">QCoapResource</a></span>
 {
     Q_GADGET
     Q_PROPERTY(<span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> title READ title)
     Q_PROPERTY(<span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> host READ hostStr)
     Q_PROPERTY(<span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> path READ path)

     QML_ANONYMOUS
 <span class="keyword">public</span>:
     QmlCoapResource() : <span class="type"><a href="qcoapresource.html" translate="no">QCoapResource</a></span>() {}
     QmlCoapResource(<span class="keyword">const</span> <span class="type"><a href="qcoapresource.html" translate="no">QCoapResource</a></span> <span class="operator">&amp;</span>resource)
         : <span class="type"><a href="qcoapresource.html" translate="no">QCoapResource</a></span>(resource) {}

     <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> hostStr() <span class="keyword">const</span> { <span class="keyword">return</span> host()<span class="operator">.</span>toString(); }
 };
</pre>
<p>After that, create the <code translate="no">QmlCoapMulticastClient</code> class with the <a href="qcoapclient.html" translate="no">QCoapClient</a> class as a base class. Use the <a href="../qtcore/qobject.html#Q_PROPERTY" translate="no">Q_PROPERTY</a> macro to expose a custom property, and also create several <a href="../qtcore/qobject.html#Q_INVOKABLE" translate="no">Q_INVOKABLE</a> methods. Both the property and the invokable methods can be accessed from QML. Unlike <code translate="no">QmlCoapResource</code>, you want to be able to create this class from QML, so use the <a href="../qtqml/qqmlengine.html#QML_NAMED_ELEMENT" translate="no">QML_NAMED_ELEMENT</a> macro to register the class in QML.</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> QmlCoapMulticastClient : <span class="keyword">public</span> <span class="type"><a href="qcoapclient.html" translate="no">QCoapClient</a></span>
 {
     Q_OBJECT

     Q_PROPERTY(<span class="type">bool</span> isDiscovering READ isDiscovering NOTIFY isDiscoveringChanged)

     QML_NAMED_ELEMENT(CoapMulticastClient)
 <span class="keyword">public</span>:
     QmlCoapMulticastClient(<span class="type"><a href="../qtcore/qobject.html" translate="no">QObject</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);

     Q_INVOKABLE <span class="type">void</span> discover(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>host<span class="operator">,</span> <span class="type">int</span> port<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>discoveryPath);
     Q_INVOKABLE <span class="type">void</span> discover(<span class="type"><a href="qtcoap-module.html" translate="no">QtCoap</a></span><span class="operator">::</span>MulticastGroup group<span class="operator">,</span> <span class="type">int</span> port<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>discoveryPath);
     Q_INVOKABLE <span class="type">void</span> stopDiscovery();

     <span class="type">bool</span> isDiscovering() <span class="keyword">const</span>;

 Q_SIGNALS:
     <span class="type">void</span> discovered(<span class="keyword">const</span> QmlCoapResource <span class="operator">&amp;</span>resource);
     <span class="type">void</span> finished(<span class="type">int</span> error);
     <span class="comment">// The bool parameter is not provided, because the signal is only used by</span>
     <span class="comment">// the QML property system, and it does not use the passed value anyway.</span>
     <span class="type">void</span> isDiscoveringChanged();

 <span class="keyword">public</span> <span class="keyword">slots</span>:
     <span class="type">void</span> onDiscovered(<span class="type"><a href="qcoapresourcediscoveryreply.html" translate="no">QCoapResourceDiscoveryReply</a></span> <span class="operator">*</span>reply<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="../qtcore/qlist.html" translate="no">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="qcoapresource.html" translate="no">QCoapResource</a></span><span class="operator">&gt;</span> <span class="operator">&amp;</span>resources);

 <span class="keyword">private</span>:
     <span class="type"><a href="qcoapresourcediscoveryreply.html" translate="no">QCoapResourceDiscoveryReply</a></span> <span class="operator">*</span>m_reply <span class="operator">=</span> nullptr;
 };
</pre>
<p>Finally, register the <a href="qtcoap.html" translate="no">QtCoap</a> namespace, so that you can use the enums provided there:</p>
<pre class="cpp" translate="no">
 <span class="keyword">namespace</span> <span class="type">QCoapForeignNamespace</span>
 {
     Q_NAMESPACE
     QML_FOREIGN_NAMESPACE(<span class="type"><a href="qtcoap-module.html" translate="no">QtCoap</a></span>)
     QML_NAMED_ELEMENT(<span class="type"><a href="qtcoap-module.html" translate="no">QtCoap</a></span>)
 }
</pre>
<h4 id="adjusting-build-files">Adjusting Build Files</h4>
<p>To make the custom types available from QML, update the build system files accordingly.</p>
<h5 id="cmake-build">CMake Build</h5>
<p>For a CMake-based build, add the following to the <code translate="no">CMakeLists.txt</code>:</p>
<pre class="cpp" translate="no">
 qt_add_qml_module(quickmulticastclient
     URI CoapClientModule
     VERSION 1.0
     SOURCES
         qmlcoapmulticastclient.cpp qmlcoapmulticastclient.h
     QML_FILES
         Main.qml
 )
</pre>
<h5 id="qmake-build">qmake Build</h5>
<p>For a qmake build, modify the <code translate="no">quickmulticastclient.pro</code> file in the following way:</p>
<pre class="cpp" translate="no">
 CONFIG += qmltypes
 QML_IMPORT_NAME = CoapClientModule
 QML_IMPORT_MAJOR_VERSION = 1
     ...
 qml_resources.files = \
     qmldir \
     Main.qml

 qml_resources.prefix = /qt/qml/CoapClientModule

 RESOURCES += qml_resources
</pre>
<h4 id="using-new-qml-types">Using New QML Types</h4>
<p>Now, when the C++ classes are properly exposed to QML, you can use the new types:</p>
<pre class="qml" translate="no">
 <span class="type">CoapMulticastClient</span> {
     <span class="name">id</span>: <span class="name">client</span>
     <span class="name">onDiscovered</span>: (<span class="keyword"></span>resource) =&gt; { <span class="name">root</span>.<span class="name">addResource</span>(<span class="name">resource</span>) }

     <span class="name">onFinished</span>: (<span class="keyword"></span>error) =&gt; {
         <span class="name">statusLabel</span>.<span class="name">text</span> <span class="operator">=</span> (<span class="name">error</span> <span class="operator">===</span> <span class="name">QtCoap</span>.<span class="name">Error</span>.<span class="name">Ok</span>)
                 ? <span class="name">qsTr</span>(<span class="string">&quot;Finished resource discovery.&quot;</span>)
                 : <span class="name">qsTr</span>(<span class="string">&quot;Resource discovery failed with error code: %1&quot;</span>).<span class="name">arg</span>(<span class="name">error</span>)
     }
 }
</pre>
<p>The <code translate="no">QmlCoapMulticastClient::finished()</code> signal triggers the <code translate="no">onFinished</code> signal handler, to show the request's status in the UI. Note that the example does not use <a href="qcoapclient.html" translate="no">QCoapClient</a>'s signals directly, because both <a href="qcoapclient.html#error" translate="no">error</a>() and <a href="qcoapclient.html#finished" translate="no">finished</a>() signals take a <a href="qcoapreply.html" translate="no">QCoapReply</a> as a parameter (which is not exposed to QML), and the example only requires the error code.</p>
<p>The <code translate="no">QmlCoapMulticastClient</code>'s constructor forwards the <a href="qcoapclient.html" translate="no">QCoapClient</a>'s signals to <code translate="no">QmlCoapMulticastClient::finished()</code> signal:</p>
<pre class="cpp" translate="no">
 QmlCoapMulticastClient<span class="operator">::</span>QmlCoapMulticastClient(<span class="type"><a href="../qtcore/qobject.html" translate="no">QObject</a></span> <span class="operator">*</span>parent)
     : <span class="type"><a href="qcoapclient.html" translate="no">QCoapClient</a></span>(<span class="type"><a href="qtcoap-module.html" translate="no">QtCoap</a></span><span class="operator">::</span>SecurityMode<span class="operator">::</span>NoSecurity<span class="operator">,</span> parent)
 {
     connect(<span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcoapclient.html" translate="no">QCoapClient</a></span><span class="operator">::</span>finished<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span>
             <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span>(<span class="type"><a href="qcoapreply.html" translate="no">QCoapReply</a></span> <span class="operator">*</span>reply) {
                 <span class="keyword">if</span> (reply) {
                     <span class="keyword">emit</span> finished(<span class="keyword">static_cast</span><span class="operator">&lt;</span><span class="type">int</span><span class="operator">&gt;</span>(reply<span class="operator">-</span><span class="operator">&gt;</span>errorReceived()));
                     reply<span class="operator">-</span><span class="operator">&gt;</span>deleteLater();
                     <span class="keyword">if</span> (m_reply <span class="operator">=</span><span class="operator">=</span> reply) {
                         m_reply <span class="operator">=</span> nullptr;
                         <span class="keyword">emit</span> isDiscoveringChanged();
                     }
                 } <span class="keyword">else</span> {
                     qCWarning(lcCoapClient<span class="operator">,</span> <span class="string">&quot;Something went wrong, received a null reply&quot;</span>);
                 }
             });

     connect(<span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcoapclient.html" translate="no">QCoapClient</a></span><span class="operator">::</span>error<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span>
             <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span>(<span class="type"><a href="qcoapreply.html" translate="no">QCoapReply</a></span> <span class="operator">*</span><span class="operator">,</span> <span class="type"><a href="qtcoap-module.html" translate="no">QtCoap</a></span><span class="operator">::</span>Error err) {
                 <span class="keyword">emit</span> finished(<span class="keyword">static_cast</span><span class="operator">&lt;</span><span class="type">int</span><span class="operator">&gt;</span>(err));
             });
 }
</pre>
<p>When the <b translate="no">Discover</b> button is pressed, one of the overloaded <code translate="no">discover()</code> methods is invoked, based on the selected multicast group:</p>
<pre class="qml" translate="no">
 <span class="type">Button</span> {
     <span class="name">id</span>: <span class="name">discoverButton</span>
     <span class="name">text</span>: <span class="name">client</span>.<span class="name">isDiscovering</span> ? <span class="name">qsTr</span>(<span class="string">&quot;Stop Discovery&quot;</span>) : <span class="name">qsTr</span>(<span class="string">&quot;Discover&quot;</span>)
     <span class="name">Layout</span>.preferredWidth: <span class="number">100</span>

     <span class="name">onClicked</span>: {
         <span class="keyword">if</span> (<span class="name">client</span>.<span class="name">isDiscovering</span>) {
             <span class="name">client</span>.<span class="name">stopDiscovery</span>()
         } <span class="keyword">else</span> {
             var currentGroup = <span class="name">groupComboBox</span>.<span class="name">model</span>.<span class="name">get</span>(<span class="name">groupComboBox</span>.<span class="name">currentIndex</span>).<span class="name">value</span>;

             var path = <span class="string">&quot;&quot;</span>;
             <span class="keyword">if</span> (<span class="name">currentGroup</span> <span class="operator">!==</span> - <span class="number">1</span>) {
                 <span class="name">client</span>.<span class="name">discover</span>(<span class="name">currentGroup</span>, <span class="name">parseInt</span>(<span class="name">portField</span>.<span class="name">text</span>),
                                 <span class="name">discoveryPathField</span>.<span class="name">text</span>);
                 <span class="name">path</span> <span class="operator">=</span> <span class="name">groupComboBox</span>.<span class="name">currentText</span>;
             } <span class="keyword">else</span> {
                 <span class="name">client</span>.<span class="name">discover</span>(<span class="name">customGroupField</span>.<span class="name">text</span>, <span class="name">parseInt</span>(<span class="name">portField</span>.<span class="name">text</span>),
                                 <span class="name">discoveryPathField</span>.<span class="name">text</span>);
                 <span class="name">path</span> <span class="operator">=</span> <span class="name">customGroupField</span>.<span class="name">text</span> <span class="operator">+</span> <span class="name">discoveryPathField</span>.<span class="name">text</span>;
             }
             <span class="name">statusLabel</span>.<span class="name">text</span> <span class="operator">=</span> <span class="name">qsTr</span>(<span class="string">&quot;Discovering resources at %1...&quot;</span>).<span class="name">arg</span>(<span class="name">path</span>);
         }
     }
 }
</pre>
<p>This overload is called when a custom multicast group or a host address is selected:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> QmlCoapMulticastClient<span class="operator">::</span>discover(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>host<span class="operator">,</span> <span class="type">int</span> port<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>discoveryPath)
 {
     <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> url;
     url<span class="operator">.</span>setHost(host);
     url<span class="operator">.</span>setPort(port);

     m_reply <span class="operator">=</span> <span class="type"><a href="qcoapclient.html" translate="no">QCoapClient</a></span><span class="operator">::</span>discover(url<span class="operator">,</span> discoveryPath);
     <span class="keyword">if</span> (m_reply) {
         connect(m_reply<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcoapresourcediscoveryreply.html" translate="no">QCoapResourceDiscoveryReply</a></span><span class="operator">::</span>discovered<span class="operator">,</span>
                 <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>QmlCoapMulticastClient<span class="operator">::</span>onDiscovered);
         <span class="keyword">emit</span> isDiscoveringChanged();
     } <span class="keyword">else</span> {
         qCWarning(lcCoapClient<span class="operator">,</span> <span class="string">&quot;Discovery request failed.&quot;</span>);
     }
 }
</pre>
<p>And this overload is called when one of the suggested multicast groups is selected in the UI:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> QmlCoapMulticastClient<span class="operator">::</span>discover(<span class="type"><a href="qtcoap-module.html" translate="no">QtCoap</a></span><span class="operator">::</span>MulticastGroup group<span class="operator">,</span> <span class="type">int</span> port<span class="operator">,</span>
                                       <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>discoveryPath)
 {
     m_reply <span class="operator">=</span> <span class="type"><a href="qcoapclient.html" translate="no">QCoapClient</a></span><span class="operator">::</span>discover(group<span class="operator">,</span> port<span class="operator">,</span> discoveryPath);
     <span class="keyword">if</span> (m_reply) {
         connect(m_reply<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcoapresourcediscoveryreply.html" translate="no">QCoapResourceDiscoveryReply</a></span><span class="operator">::</span>discovered<span class="operator">,</span>
                 <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>QmlCoapMulticastClient<span class="operator">::</span>onDiscovered);
         <span class="keyword">emit</span> isDiscoveringChanged();
     } <span class="keyword">else</span> {
         qCWarning(lcCoapClient<span class="operator">,</span> <span class="string">&quot;Discovery request failed.&quot;</span>);
     }
 }
</pre>
<p>The <a href="qcoapresourcediscoveryreply.html#discovered" translate="no">QCoapResourceDiscoveryReply::discovered</a>() signal delivers a list of <a href="qcoapresource.html" translate="no">QCoapResource</a>s, which is not a QML type. To make the resources available in QML, forward each resource in the list to the <code translate="no">QmlCoapMulticastClient::discovered()</code> signal, which takes a <code translate="no">QmlCoapResource</code> instead:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> QmlCoapMulticastClient<span class="operator">::</span>onDiscovered(<span class="type"><a href="qcoapresourcediscoveryreply.html" translate="no">QCoapResourceDiscoveryReply</a></span> <span class="operator">*</span>reply<span class="operator">,</span>
                                           <span class="keyword">const</span> <span class="type"><a href="../qtcore/qlist.html" translate="no">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="qcoapresource.html" translate="no">QCoapResource</a></span><span class="operator">&gt;</span> <span class="operator">&amp;</span>resources)
 {
     Q_UNUSED(reply)
     <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> <span class="operator">&amp;</span>resource : resources)
         <span class="keyword">emit</span> discovered(resource);
 }
</pre>
<p>The discovered resources are added to the <code translate="no">resourceModel</code> of the list view in the UI:</p>
<pre class="qml" translate="no">
 <span class="keyword">function </span><span class="name">addResource</span>(resource) {
     <span class="name">resourceModel</span>.<span class="name">insert</span>(<span class="number">0</span>, {&quot;host&quot; : <span class="name">resource</span>.<span class="name">host</span>,
                              &quot;path&quot; : <span class="name">resource</span>.<span class="name">path</span>,
                              &quot;title&quot; : <span class="name">resource</span>.<span class="name">title</span>})
 }
</pre>
<p>While the discovery is in progress, press the <b translate="no">Stop Discovery</b> button to stop the discovery. Internally it is done by aborting the current request:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> QmlCoapMulticastClient<span class="operator">::</span>stopDiscovery()
 {
     <span class="keyword">if</span> (m_reply)
         m_reply<span class="operator">-</span><span class="operator">&gt;</span>abortRequest();
 }
</pre>
<p>Files:</p>
<ul>
<li><a href="qtcoap-quickmulticastclient-cmakelists-txt.html" translate="no">quickmulticastclient/CMakeLists.txt</a></li>
<li><a href="qtcoap-quickmulticastclient-main-qml.html" translate="no">quickmulticastclient/Main.qml</a></li>
<li><a href="qtcoap-quickmulticastclient-main-cpp.html" translate="no">quickmulticastclient/main.cpp</a></li>
<li><a href="qtcoap-quickmulticastclient-qmlcoapmulticastclient-cpp.html" translate="no">quickmulticastclient/qmlcoapmulticastclient.cpp</a></li>
<li><a href="qtcoap-quickmulticastclient-qmlcoapmulticastclient-h.html" translate="no">quickmulticastclient/qmlcoapmulticastclient.h</a></li>
<li><a href="qtcoap-quickmulticastclient-qmldir.html" translate="no">quickmulticastclient/qmldir</a></li>
<li><a href="qtcoap-quickmulticastclient-quickmulticastclient-pro.html" translate="no">quickmulticastclient/quickmulticastclient.pro</a></li>
</ul>
</div>
<!-- @@@quickmulticastclient -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
