<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qqmlsa.cpp -->
  <meta name="description" content="Base class for all static analysis passes on elements.">
  <title>ElementPass Class | Qt QML Compiler 6.6.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.6</a></li>
<li><a href="qtqmlcompiler-index.html" translate="no">Qt QML Compiler</a></li>
<li><a href="qtqmlcompiler-module.html" translate="no">C++ Classes</a></li>
<li><a href="qtqmlcompiler-module.html" translate="no">QtQmlCompiler (Technical Preview)</a></li>
<li>ElementPass</li>
<li id="buildversion"><a href="qtqmlcompiler-index.html" translate="no">Qt 6.6&#x2e;0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title" translate="no">ElementPass Class</h1>
<span class="small-subtitle" translate="no">class <a href="qqmlsa.html" translate="no">QQmlSA</a>::ElementPass</span>
<!-- $$$ElementPass-brief -->
<p>Base class for all static analysis passes on elements. <a href="#details">More...</a></p>
<!-- @@@ElementPass -->
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign">  <span class="preprocessor">#include &lt;ElementPass&gt;</span></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <a href="qqmlsa-genericpass.html" translate="no">QQmlSA::GenericPass</a></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Status:</td><td class="memItemRight bottomAlign"> Technical Preview<span class="status technical-preview"></span></td></tr>
</table></div>
<ul>
<li><a href="qqmlsa-elementpass-members.html">List of all members, including inherited members</a></li>
</ul>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="qqmlsa-elementpass.html#run" translate="no">run</a></b>(const Element &amp;<i>element</i>) = 0</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="qqmlsa-elementpass.html#shouldRun" translate="no">shouldRun</a></b>(const Element &amp;<i>element</i>)</td></tr>
</table></div>
<!-- $$$ElementPass-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>ElementPass is the simpler of the two analysis passes. It will consider every element in a file. The <a href="qqmlsa-elementpass.html#shouldRun" translate="no">shouldRun</a>() method can be used to filter out irrelevant elements, and the <a href="qqmlsa-elementpass.html#run" translate="no">run</a>() method is doing the initial work.</p>
<p>Common tasks suitable for an ElementPass are</p>
<ul>
<li>checking that properties of an Element are not combined in a nonsensical way</li>
<li>validating property values (e.g&#x2e; that a property takes only certain enum values)</li>
<li>checking behavior dependent on an Element's parent (e.g&#x2e; not using <a href="../qtquick/qml-qtquick-item.html#width-prop" translate="no">Item::width</a> when the parent element is a <code translate="no">Layout</code>).</li>
</ul>
<p>As shown in the snippet below, it is recommended to do necessary type resolution in the constructor of the ElementPass and cache it in local members, and to implement some filtering via <a href="qqmlsa-elementpass.html#shouldRun" translate="no">shouldRun</a>() to keep the static analysis performant.</p>
<pre class="cpp" translate="no">
 <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="type">QQmlSA</span>;
 <span class="keyword">class</span> MyElementPass : <span class="keyword">public</span> ElementPass
 {
     Element myType;
     <span class="keyword">public</span>:
         MyElementPass(<span class="type">QQmlSA</span><span class="operator">::</span>PassManager <span class="operator">*</span>manager)
         : myType(resolveType(<span class="string">&quot;MyModule&quot;</span><span class="operator">,</span> <span class="string">&quot;MyType&quot;</span>)) {}

         <span class="type">bool</span> shouldRun(<span class="keyword">const</span> Element <span class="operator">&amp;</span>element) override
         {
             <span class="keyword">return</span> element<span class="operator">.</span>inherits(myType);
         }
         <span class="type">void</span> run(<span class="keyword">const</span> Element <span class="operator">&amp;</span>element) override
         {
             <span class="comment">// actual pass logic</span>
         }
 }
</pre>
<p>ElementPasses have limited insight into how an element's properties are used. If you need that information, consider using a <a href="qqmlsa-propertypass.html" translate="no">PropertyPass</a> instead.</p>
<div class="admonition note">
<p><b>Note: </b>ElementPass will only ever consider instantiable types. Therefore, it is unsuitable to analyze attached types and singletons. Those need to be handled via a <a href="qqmlsa-propertypass.html" translate="no">PropertyPass</a>.</p>
</div>
</div>
<!-- @@@ElementPass -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$run[overload1]$$$runconstElement& -->
<h3 class="fn" translate="no" id="run"><code translate="no">[pure virtual] </code><span class="type">void</span> ElementPass::<span class="name">run</span>(const <span class="type"><a href="qqmlsa-element.html" translate="no">Element</a></span> &amp;<i>element</i>)</h3>
<p>Executes if <code translate="no">shouldRun()</code> returns <code translate="no">true</code>. Performs the real computation of the pass on <i translate="no">element</i>. This method is meant to be overridden. Calling the base method is not necessary.</p>
<!-- @@@run -->
<!-- $$$shouldRun[overload1]$$$shouldRunconstElement& -->
<h3 class="fn" translate="no" id="shouldRun"><code translate="no">[virtual] </code><span class="type">bool</span> ElementPass::<span class="name">shouldRun</span>(const <span class="type"><a href="qqmlsa-element.html" translate="no">Element</a></span> &amp;<i>element</i>)</h3>
<p>Controls whether the <code translate="no">run()</code> function should be executed on the given <i translate="no">element</i>. Subclasses can override this method to improve performance of the analysis by filtering out elements which are not relevant.</p>
<p>The default implementation unconditionally returns <code translate="no">true</code>.</p>
<!-- @@@shouldRun -->
</div>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2023 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br/>    Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
