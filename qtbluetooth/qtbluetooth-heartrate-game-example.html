<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- heartrate-game.qdoc -->
  <meta name="description" content="A game demonstrating the interaction with a Bluetooth Low Energy Heart Rate device/service.">
  <title>Bluetooth Low Energy Heart Rate Game | Qt Bluetooth 6.6.2</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.6</a></li>
<li><a href="qtbluetooth-index.html" translate="no">Qt Bluetooth</a></li>
<li>Bluetooth Low Energy Heart Rate Game</li>
<li id="buildversion"><a href="qtbluetooth-index.html" translate="no">Qt 6.6.2 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#running-the-example">Running the Example</a></li>
<li class="level1"><a href="#checking-bluetooth-permissions">Checking Bluetooth Permissions</a></li>
<li class="level1"><a href="#visual-tour">Visual Tour</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Bluetooth Low Energy Heart Rate Game</h1>
<!-- $$$heartrate-game-brief -->
<p>A game demonstrating the interaction with a Bluetooth Low Energy Heart Rate device/service.</p>
<!-- @@@heartrate-game -->
<!-- $$$heartrate-game-description -->
<div class="descr" id="details">
<p>The Bluetooth Low Energy Heart Rate Game shows how to develop a Bluetooth Low Energy application using the <a href="qtbluetooth-module.html" translate="no">Qt Bluetooth API</a>. The application covers the scanning for Bluetooth Low Energy devices, connecting to a Heart Rate service on the device, writing characteristics and descriptors, and receiving updates from the device once the heart rate has changed.</p>
<p class="centerAlign"><img src="images/heartgame-start.webp" alt="" /></p><p>The example introduces the following Qt classes:</p>
<ul>
<li><a href="qlowenergycontroller.html" translate="no">QLowEnergyController</a></li>
<li><a href="qlowenergyservice.html" translate="no">QLowEnergyService</a></li>
<li><a href="qlowenergycharacteristic.html" translate="no">QLowEnergyCharacteristic</a></li>
<li><a href="qlowenergydescriptor.html" translate="no">QLowEnergyDescriptor</a></li>
</ul>
<p>A Bluetooth Low Energy device with a Heart Rate service is required for this application to work. An alternative might be a programmable Bluetooth Low Energy device which might simulate the service. You can also use the <a href="qtbluetooth-heartrate-server-example.html" translate="no">Heart Rate server</a> example for that purpose. If no such device is available, a demo mode is available which creates and displays random values. This demo mode is enabled by passing <code translate="no">--simulator</code> on the command line.</p>
<p>The goal of the game is to increase the measured heart rate as much as possible.</p>
<p>A detailed explanation of the APIs used in this example is given in the <a href="qtbluetooth-le-overview.html#using-qt-bluetooth-low-energy-api" translate="no">Using Qt Bluetooth Low Energy API</a> section of the <a href="qtbluetooth-index.html" translate="no">Qt Bluetooth</a> module documentation.</p>
<p>The <a href="qtbluetooth-lowenergyscanner-example.html" translate="no">Bluetooth Low Energy Scanner</a> example might be more suitable if a heart rate device is not available. The scanner example works with any type of Bluetooth Low Energy peripheral device.</p>
<h4 id="running-the-example">Running the Example</h4>
<p>To run the example from <a href="https://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b translate="no">Welcome</b> mode and select the example from <b translate="no">Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<h4 id="checking-bluetooth-permissions">Checking Bluetooth Permissions</h4>
<p>Before the application can start using Bluetooth, we have to check that appropriate permissions were granted:</p>
<pre class="cpp" translate="no">
 <span class="type"><a href="../qtcore/qbluetoothpermission.html" translate="no">QBluetoothPermission</a></span> permission{};
 permission<span class="operator">.</span>setCommunicationModes(<span class="type"><a href="../qtcore/qbluetoothpermission.html" translate="no">QBluetoothPermission</a></span><span class="operator">::</span>Access);
 <span class="keyword">switch</span> (<a href="../qtwidgets/qapplication.html#qApp" translate="no">qApp</a><span class="operator">-</span><span class="operator">&gt;</span>checkPermission(permission)) {
 <span class="keyword">case</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>PermissionStatus<span class="operator">::</span>Undetermined:
     <a href="../qtwidgets/qapplication.html#qApp" translate="no">qApp</a><span class="operator">-</span><span class="operator">&gt;</span>requestPermission(permission<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>DeviceFinder<span class="operator">::</span>startSearch);
     <span class="keyword">return</span>;
 <span class="keyword">case</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>PermissionStatus<span class="operator">::</span>Denied:
     setError(tr(<span class="string">&quot;Bluetooth permissions not granted!&quot;</span>));
     setIcon(IconError);
     <span class="keyword">return</span>;
 <span class="keyword">case</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>PermissionStatus<span class="operator">::</span>Granted:
     <span class="keyword">break</span>; <span class="comment">// proceed to search</span>
 }
</pre>
<h4 id="visual-tour">Visual Tour</h4>
<p>The application searches for all Bluetooth Low Energy peripheral devices in the vicinity. It is assumed that the remote devices advertise their presence. The found devices are presented in a list. Note that all found Bluetooth Low Energy devices are listed even if they do not offer a Heart Rate service.</p>
<p class="centerAlign"><img src="images/heartgame-search.webp" alt="" /></p><p>After the user has selected a target device, the example connects to its Heart Rate service if one is available. It automatically enables notification updates for the Heart Rate value and presents the current value on the screen.</p>
<p class="centerAlign"><img src="images/heartgame-running.webp" alt="" /></p><p>Once the monitoring process is finished, a small summary of the received values is presented.</p>
<p class="centerAlign"><img src="images/heartgame-result.webp" alt="" /></p><p><a href="https://code.qt.io/cgit/qt/qtconnectivity.git/tree/examples/bluetooth/heartrate-game?h=6.6" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@heartrate-game -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
