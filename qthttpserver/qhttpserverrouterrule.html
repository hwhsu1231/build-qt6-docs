<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qhttpserverrouterrule.cpp -->
  <meta name="description" content="The QHttpServerRouterRule is the base class for QHttpServerRouter rules.">
  <title>QHttpServerRouterRule Class | Qt HTTP Server 6.6.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.6</a></li>
<li><a href="qthttpserver-index.html" translate="no">Qt HTTP Server</a></li>
<li><a href="qthttpserver-module.html" translate="no">C++ Classes</a></li>
<li><a href="qthttpserver-module.html" translate="no">QtHttpServer (Technical Preview)</a></li>
<li>QHttpServerRouterRule</li>
<li id="buildversion"><a href="qthttpserver-index.html" translate="no">Qt 6.6&#x2e;0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#public-types">Public Types</a></li>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#protected-functions">Protected Functions</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title" translate="no">QHttpServerRouterRule Class</h1>
<!-- $$$QHttpServerRouterRule-brief -->
<p>The QHttpServerRouterRule is the base class for <a href="qhttpserverrouter.html" translate="no">QHttpServerRouter</a> rules. <a href="#details">More...</a></p>
<!-- @@@QHttpServerRouterRule -->
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign">  <span class="preprocessor">#include &lt;QHttpServerRouterRule&gt;</span></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> CMake:</td><td class="memItemRight bottomAlign"> find_package(Qt6 REQUIRED COMPONENTS HttpServer) <br/>
target_link_libraries(mytarget PRIVATE Qt6::HttpServer)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> QT += httpserver</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 6.4</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Status:</td><td class="memItemRight bottomAlign"> Technical Preview<span class="status technical-preview"></span></td></tr>
</table></div>
<ul>
<li><a href="qhttpserverrouterrule-members.html">List of all members, including inherited members</a></li>
</ul>
<h2 id="public-types">Public Types</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qhttpserverrouterrule.html#RouterHandler-typedef" translate="no">RouterHandler</a></b></td></tr>
</table></div>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qhttpserverrouterrule.html#QHttpServerRouterRule-2" translate="no">QHttpServerRouterRule</a></b>(const QString &amp;<i>pathPattern</i>, RouterHandler <i>routerHandler</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qhttpserverrouterrule.html#QHttpServerRouterRule-3" translate="no">QHttpServerRouterRule</a></b>(const QString &amp;<i>pathPattern</i>, const QHttpServerRequest::Methods <i>methods</i>, RouterHandler <i>routerHandler</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual </td><td class="memItemRight bottomAlign"><b><a href="qhttpserverrouterrule.html#dtor.QHttpServerRouterRule" translate="no">~QHttpServerRouterRule</a></b>()</td></tr>
</table></div>
<h2 id="protected-functions">Protected Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qhttpserverrouterrule.html#exec" translate="no">exec</a></b>(const QHttpServerRequest &amp;<i>request</i>, QHttpServerResponder &amp;<i>responder</i>) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qhttpserverrouterrule.html#hasValidMethods" translate="no">hasValidMethods</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="qhttpserverrouterrule.html#matches" translate="no">matches</a></b>(const QHttpServerRequest &amp;<i>request</i>, QRegularExpressionMatch *<i>match</i>) const</td></tr>
</table></div>
<!-- $$$QHttpServerRouterRule-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>Use QHttpServerRouterRule to specify expected request parameters:</p>
<div class="table"><table class="valuelist"><tr valign="top" class="odd"><th class="tblConst">Constant</th><th class="tbldscr">Description</th></tr>
<tr><td class="topAlign"><code translate="no">path</code></td><td class="topAlign"><a href="../qtcore/qurl.html#path" translate="no">QUrl::path</a>()</td></tr>
<tr><td class="topAlign"><code translate="no">HTTP</code></td><td class="topAlign">methods <a href="qhttpserverrequest.html#Method-enum" translate="no">QHttpServerRequest::Methods</a></td></tr>
<tr><td class="topAlign"><code translate="no">callback</code></td><td class="topAlign">User-defined response callback</td></tr>
</table></div>
<div class="admonition note">
<p><b>Note: </b>This is a low level API, see <a href="qhttpserver.html" translate="no">QHttpServer</a> for higher level alternatives.</p>
</div>
<p>Example of QHttpServerRouterRule and <a href="qhttpserverrouter.html" translate="no">QHttpServerRouter</a> usage:</p>
<pre class="cpp" translate="no">
 <span class="keyword">template</span><span class="operator">&lt;</span><span class="keyword">typename</span> ViewHandler<span class="operator">&gt;</span>
 <span class="type">void</span> route(<span class="keyword">const</span> <span class="type">char</span> <span class="operator">*</span>path<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="qhttpserverrequest.html" translate="no">QHttpServerRequest</a></span><span class="operator">::</span>Methods methods<span class="operator">,</span> ViewHandler <span class="operator">&amp;</span><span class="operator">&amp;</span>viewHandler)
 {
     <span class="keyword">auto</span> rule <span class="operator">=</span> std<span class="operator">::</span>make_unique<span class="operator">&lt;</span><span class="type">QHttpServerRouterRule</span><span class="operator">&gt;</span>(
             path<span class="operator">,</span> methods<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> viewHandler <span class="operator">=</span> std<span class="operator">::</span>forward<span class="operator">&lt;</span>ViewHandler<span class="operator">&gt;</span>(viewHandler)<span class="operator">]</span>
                                                (<span class="type"><a href="../qtcore/qregularexpressionmatch.html" translate="no">QRegularExpressionMatch</a></span> <span class="operator">&amp;</span>match<span class="operator">,</span>
                                                 <span class="keyword">const</span> <span class="type"><a href="qhttpserverrequest.html" translate="no">QHttpServerRequest</a></span> <span class="operator">&amp;</span>request<span class="operator">,</span>
                                                 <span class="type"><a href="qhttpserverresponder.html" translate="no">QHttpServerResponder</a></span> <span class="operator">&amp;</span><span class="operator">&amp;</span>responder) <span class="keyword">mutable</span> {
         <span class="keyword">auto</span> boundViewHandler <span class="operator">=</span> router<span class="operator">.</span>bindCaptured<span class="operator">&lt;</span>ViewHandler<span class="operator">&gt;</span>(
                 std<span class="operator">::</span>move(viewHandler)<span class="operator">,</span> match);
         <span class="comment">// call viewHandler</span>
         boundViewHandler();
     });

     <span class="comment">// QHttpServerRouter</span>
     router<span class="operator">.</span>addRule<span class="operator">&lt;</span>ViewHandler<span class="operator">&gt;</span>(std<span class="operator">::</span>move(rule));
 }

 <span class="comment">// Valid:</span>
 route(<span class="string">&quot;/user/&quot;</span><span class="operator">,</span> <span class="operator">[</span><span class="operator">]</span> (<span class="type"><a href="../qtcore/qttypes.html#qint64-typedef" translate="no">qint64</a></span> id) { } );                            <span class="comment">// &quot;/user/1&quot;</span>
                                                                  <span class="comment">// &quot;/user/3&quot;</span>
                                                                  <span class="comment">//</span>
 route(<span class="string">&quot;/user/&lt;arg&gt;/history&quot;</span><span class="operator">,</span> <span class="operator">[</span><span class="operator">]</span> (<span class="type"><a href="../qtcore/qttypes.html#qint64-typedef" translate="no">qint64</a></span> id) { } );               <span class="comment">// &quot;/user/1/history&quot;</span>
                                                                  <span class="comment">// &quot;/user/2/history&quot;</span>
                                                                  <span class="comment">//</span>
 route(<span class="string">&quot;/user/&lt;arg&gt;/history/&quot;</span><span class="operator">,</span> <span class="operator">[</span><span class="operator">]</span> (<span class="type"><a href="../qtcore/qttypes.html#qint64-typedef" translate="no">qint64</a></span> id<span class="operator">,</span> <span class="type"><a href="../qtcore/qttypes.html#qint64-typedef" translate="no">qint64</a></span> page) { } ); <span class="comment">// &quot;/user/1/history/1&quot;</span>
                                                                  <span class="comment">// &quot;/user/2/history/2&quot;</span>

 <span class="comment">// Invalid:</span>
 route(<span class="string">&quot;/user/&lt;arg&gt;&quot;</span><span class="operator">,</span> <span class="operator">[</span><span class="operator">]</span> () { } );  <span class="comment">// ERROR: path pattern has &lt;arg&gt;, but ViewHandler does not have any arguments</span>
 route(<span class="string">&quot;/user/\\d+&quot;</span><span class="operator">,</span> <span class="operator">[</span><span class="operator">]</span> () { } );   <span class="comment">// ERROR: path pattern does not support manual regexp</span>
</pre>
<div class="admonition note">
<p><b>Note: </b>Regular expressions in the path pattern are not supported, but can be registered (to match a use of &quot;&lt;val&gt;&quot; to a specific type) using <a href="qhttpserverrouter.html#addConverter" translate="no">QHttpServerRouter::addConverter</a>().</p>
</div>
</div>
<!-- @@@QHttpServerRouterRule -->
<div class="types">
<h2>Member Type Documentation</h2>
<!-- $$$RouterHandler -->
<h3 class="fn" translate="no" id="RouterHandler-typedef"><code translate="no">[alias] </code>QHttpServerRouterRule::<span class="name">RouterHandler</span></h3>
<p>Type alias for std::function&lt;void(const <a href="../qtcore/qregularexpressionmatch.html" translate="no">QRegularExpressionMatch</a> &amp;,const <a href="qhttpserverrequest.html" translate="no">QHttpServerRequest</a> &amp;, <a href="qhttpserverresponder.html" translate="no">QHttpServerResponder</a> &amp;&amp;)&gt;</p>
<!-- @@@RouterHandler -->
</div>
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QHttpServerRouterRule$$$QHttpServerRouterRuleconstQString&RouterHandler -->
<h3 class="fn" translate="no" id="QHttpServerRouterRule-2"><code translate="no">[explicit] </code>QHttpServerRouterRule::<span class="name">QHttpServerRouterRule</span>(const <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> &amp;<i>pathPattern</i>, <span class="type"><a href="qhttpserverrouterrule.html#RouterHandler-typedef" translate="no">RouterHandler</a></span> <i>routerHandler</i>)</h3>
<p>Constructs a rule with pathPattern <i translate="no">pathPattern</i>, and routerHandler <i translate="no">routerHandler</i>.</p>
<p>The rule accepts all HTTP methods by default.</p>
<p><b>See also </b><a href="qhttpserverrequest.html#Method-enum" translate="no">QHttpServerRequest::Methods</a>.</p>
<!-- @@@QHttpServerRouterRule -->
<!-- $$$QHttpServerRouterRule$$$QHttpServerRouterRuleconstQString&constQHttpServerRequest::MethodsRouterHandler -->
<h3 class="fn" translate="no" id="QHttpServerRouterRule-3"><code translate="no">[explicit] </code>QHttpServerRouterRule::<span class="name">QHttpServerRouterRule</span>(const <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> &amp;<i>pathPattern</i>, const <span class="type"><a href="qhttpserverrequest.html#Method-enum" translate="no">QHttpServerRequest::Methods</a></span> <i>methods</i>, <span class="type"><a href="qhttpserverrouterrule.html#RouterHandler-typedef" translate="no">RouterHandler</a></span> <i>routerHandler</i>)</h3>
<p>Constructs a rule with pathPattern <i translate="no">pathPattern</i>, methods <i translate="no">methods</i> and routerHandler <i translate="no">routerHandler</i>.</p>
<p>The rule accepts any combinations of available HTTP methods.</p>
<p><b>See also </b><a href="qhttpserverrequest.html#Method-enum" translate="no">QHttpServerRequest::Methods</a>.</p>
<!-- @@@QHttpServerRouterRule -->
<!-- $$$~QHttpServerRouterRule[overload1]$$$~QHttpServerRouterRule -->
<h3 class="fn" translate="no" id="dtor.QHttpServerRouterRule"><code translate="no">[virtual noexcept] </code>QHttpServerRouterRule::<span class="name">~QHttpServerRouterRule</span>()</h3>
<p>Destroys a <a href="qhttpserverrouterrule.html" translate="no">QHttpServerRouterRule</a>.</p>
<!-- @@@~QHttpServerRouterRule -->
<!-- $$$exec[overload1]$$$execconstQHttpServerRequest&QHttpServerResponder& -->
<h3 class="fn" translate="no" id="exec"><code translate="no">[protected] </code><span class="type">bool</span> QHttpServerRouterRule::<span class="name">exec</span>(const <span class="type"><a href="qhttpserverrequest.html" translate="no">QHttpServerRequest</a></span> &amp;<i>request</i>, <span class="type"><a href="qhttpserverresponder.html" translate="no">QHttpServerResponder</a></span> &amp;<i>responder</i>) const</h3>
<p>Executes this rule for the given <i translate="no">request</i>, if it matches.</p>
<p>This function is called by <a href="qhttpserverrouter.html" translate="no">QHttpServerRouter</a> when it receives a new request. If the given <i translate="no">request</i> matches this rule, this function handles the request by delivering a response to the given <i translate="no">responder</i>, then returns <code translate="no">true</code>. Otherwise, it returns <code translate="no">false</code>.</p>
<!-- @@@exec -->
<!-- $$$hasValidMethods[overload1]$$$hasValidMethods -->
<h3 class="fn" translate="no" id="hasValidMethods"><code translate="no">[protected] </code><span class="type">bool</span> QHttpServerRouterRule::<span class="name">hasValidMethods</span>() const</h3>
<p>Returns <code translate="no">true</code> if the methods is valid</p>
<!-- @@@hasValidMethods -->
<!-- $$$matches[overload1]$$$matchesconstQHttpServerRequest&QRegularExpressionMatch* -->
<h3 class="fn" translate="no" id="matches"><code translate="no">[virtual protected] </code><span class="type">bool</span> QHttpServerRouterRule::<span class="name">matches</span>(const <span class="type"><a href="qhttpserverrequest.html" translate="no">QHttpServerRequest</a></span> &amp;<i>request</i>, <span class="type"><a href="../qtcore/qregularexpressionmatch.html" translate="no">QRegularExpressionMatch</a></span> *<i>match</i>) const</h3>
<p>Determines whether a given <i translate="no">request</i> matches this rule.</p>
<p>This virtual function is called by <a href="qhttpserverrouterrule.html#exec" translate="no">exec</a>() to check if <i translate="no">request</i> matches this rule. If a match is found, it is stored in the object pointed to by <i translate="no">match</i> (which <i>must not</i> be <code translate="no">nullptr</code>) and this function returns <code translate="no">true</code>. Otherwise, it returns <code translate="no">false</code>.</p>
<!-- @@@matches -->
</div>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2023 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br/>    Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
