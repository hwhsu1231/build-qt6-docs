<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qt6-changes.qdoc -->
  <meta name="description" content="Migrate Qt NFC to Qt 6.">
  <title>Changes to Qt NFC | Qt NFC 6.6.2</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.6</a></li>
<li><a href="qtnfc-index.html" translate="no">Qt NFC</a></li>
<li>Changes to Qt NFC</li>
<li id="buildversion"><a href="qtnfc-index.html" translate="no">Qt 6.6.2 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#new-features-and-methods">New Features and Methods</a></li>
<li class="level2"><a href="#added-qndefrecord-clear">Added QNdefRecord::clear()</a></li>
<li class="level2"><a href="#added-qndeffilter-match">Added QNdefFilter::match()</a></li>
<li class="level2"><a href="#extended-qnearfieldtarget-type">Extended QNearFieldTarget::Type</a></li>
<li class="level1"><a href="#changes-in-the-features-and-methods">Changes in the Features and Methods</a></li>
<li class="level2"><a href="#renamed-qnearfieldmanager-isavailable">Renamed QNearFieldManager::isAvailable()</a></li>
<li class="level2"><a href="#added-access-method-argument-to-qnearfieldmanager-issupported">Added access method argument to QNearFieldManager::isSupported</a></li>
<li class="level2"><a href="#added-access-method-argument-to-qnearfieldmanager-starttargetdetection">Added access method argument to QNearFieldManager::startTargetDetection</a></li>
<li class="level2"><a href="#changed-qndefnfcsmartposterrecord-typeinfo-from-qbytearray-to-qstring">Changed QNdefNfcSmartPosterRecord::typeInfo from QByteArray to QString</a></li>
<li class="level2"><a href="#updated-return-type-of-qndeffilter-appendrecord">Updated return type of QNdefFilter::appendRecord</a></li>
<li class="level1"><a href="#removed-features-and-methods">Removed Features and Methods</a></li>
<li class="level2"><a href="#removed-qnearfieldtarget-url">Removed QNearFieldTarget::url</a></li>
<li class="level2"><a href="#removed-qnearfieldtarget-sendcommands">Removed QNearFieldTarget::sendCommands</a></li>
<li class="level2"><a href="#removed-qnearfieldtarget-keepconnection">Removed QNearFieldTarget::keepConnection</a></li>
<li class="level2"><a href="#removed-qnearfieldtarget-isprocessingcommand">Removed QNearFieldTarget::isProcessingCommand</a></li>
<li class="level2"><a href="#made-qnearfieldtarget-setresponseforrequest-private-api">Made QNearFieldTarget::setResponseForRequest private API</a></li>
<li class="level2"><a href="#removed-qnearfieldtarget-handleresponse">Removed QNearFieldTarget::handleResponse</a></li>
<li class="level2"><a href="#made-qnearfieldtarget-reporterror-private-api">Made QNearFieldTarget::reportError private API</a></li>
<li class="level2"><a href="#removed-qnearfieldtarget-ndefmessageswritten-signal">Removed QNearFieldTarget::ndefMessagesWritten signal</a></li>
<li class="level2"><a href="#removed-qnearfieldmanager-un-registerndefmessagehandler">Removed QNearFieldManager::(un)registerNdefMessageHandler</a></li>
<li class="level2"><a href="#removed-qnearfieldmanager-targetaccessmodes">Removed QNearFieldManager::TargetAccessModes</a></li>
<li class="level2"><a href="#removed-qnearfieldsharemanager-and-qnearfieldsharetarget">Removed QNearFieldShareManager and QNearFieldShareTarget</a></li>
<li class="level2"><a href="#removed-qml-api">Removed QML API</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Changes to Qt NFC</h1>
<!-- $$$qtnfc-changes-qt6.html-description -->
<div class="descr" id="details">
<p>Qt 6 is a result of the conscious effort to make the framework more efficient and easy to use.</p>
<p>We try to maintain binary and source compatibility for all the public APIs in each release. But some changes were inevitable in an effort to make Qt a better framework.</p>
<p>In this topic we summarize those changes in Qt NFC, and provide guidance to handle them.</p>
<h2 id="new-features-and-methods">New Features and Methods</h2>
<h3 id="added-qndefrecord-clear">Added <a href="qndefrecord.html#clear" translate="no">QNdefRecord::clear()</a></h3>
<p>Use this method to clear an NDEF record.</p>
<h3 id="added-qndeffilter-match">Added <a href="qndeffilter.html#match" translate="no">QNdefFilter::match()</a></h3>
<p>Use this method to check if a <a href="qndefmessage.html" translate="no">QNdefMessage</a> matches the given filter. The method returns <code translate="no">true</code> in case of successful match and <code translate="no">false</code> otherwise.</p>
<h3 id="extended-qnearfieldtarget-type">Extended <a href="qnearfieldtarget.html#Type-enum" translate="no">QNearFieldTarget::Type</a></h3>
<p>The enum was extended with two more types:</p>
<ul>
<li><a href="qnearfieldtarget.html#Type-enum" translate="no">QNearFieldTarget::NfcTagType4A</a></li>
<li><a href="qnearfieldtarget.html#Type-enum" translate="no">QNearFieldTarget::NfcTagType4B</a></li>
</ul>
<h2 id="changes-in-the-features-and-methods">Changes in the Features and Methods</h2>
<h3 id="renamed-qnearfieldmanager-isavailable">Renamed QNearFieldManager::isAvailable()</h3>
<p>The <code translate="no">QNearFieldManager::isAvailable()</code> was renamed to <a href="qnearfieldmanager.html#isEnabled" translate="no">QNearFieldManager::isEnabled</a>().</p>
<h3 id="added-access-method-argument-to-qnearfieldmanager-issupported">Added access method argument to <a href="qnearfieldmanager.html#isSupported" translate="no">QNearFieldManager::isSupported</a></h3>
<p>The <code translate="no">accessMethod</code> argument allows to check if a specific feature is supported. This is relevant because different platforms or versions of operating systems can support different options.</p>
<h3 id="added-access-method-argument-to-qnearfieldmanager-starttargetdetection">Added access method argument to <a href="qnearfieldmanager.html#startTargetDetection" translate="no">QNearFieldManager::startTargetDetection</a></h3>
<p>The <code translate="no">accessMethod</code> argument allows to scan for NFC tags with the given access method.</p>
<h3 id="changed-qndefnfcsmartposterrecord-typeinfo-from-qbytearray-to-qstring">Changed <a href="qndefnfcsmartposterrecord.html#typeInfo" translate="no">QNdefNfcSmartPosterRecord::typeInfo</a> from <a href="../qtcore/qbytearray.html" translate="no">QByteArray</a> to <a href="../qtcore/qstring.html" translate="no">QString</a></h3>
<p>According to NDEF Smart Poster specification, the type is a UTF-8 formatted string. This affects the <a href="qndefnfcsmartposterrecord.html#typeInfo" translate="no">QNdefNfcSmartPosterRecord::typeInfo</a>() and <a href="qndefnfcsmartposterrecord.html#setTypeInfo" translate="no">QNdefNfcSmartPosterRecord::setTypeInfo</a>() methods.</p>
<h3 id="updated-return-type-of-qndeffilter-appendrecord">Updated return type of <a href="qndeffilter.html#appendRecord" translate="no">QNdefFilter::appendRecord</a></h3>
<p><a href="qndeffilter.html#appendRecord" translate="no">QNdefFilter::appendRecord</a> now performs a basic validation of input parameters and returns a boolean value indicating if the record is appended to the filter or not.</p>
<h2 id="removed-features-and-methods">Removed Features and Methods</h2>
<h3 id="removed-qnearfieldtarget-url">Removed QNearFieldTarget::url</h3>
<p>The method was never implemented in the existing subclasses of <a href="qnearfieldtarget.html" translate="no">QNearFieldTarget</a>.</p>
<h3 id="removed-qnearfieldtarget-sendcommands">Removed QNearFieldTarget::sendCommands</h3>
<p>In Qt 5, the method was not very helpful because it didn't provide a way to track the results of intermediate commands. Normally, an additional command needs to be sent only when the previous command is successfully executed.</p>
<p>The correct approach would be to manually create a queue of commands, use <a href="qnearfieldtarget.html#sendCommand" translate="no">QNearFieldTarget::sendCommand</a> to send a command and <a href="qnearfieldtarget.html#requestCompleted" translate="no">QNearFieldTarget::requestCompleted</a> or <a href="qnearfieldtarget.html#error" translate="no">QNearFieldTarget::error</a> to handle the results of each command individually.</p>
<h3 id="removed-qnearfieldtarget-keepconnection">Removed QNearFieldTarget::keepConnection</h3>
<p>The methods <code translate="no">QNearFieldTarget::keepConnection()</code> and <code translate="no">QNearFieldTarget::setKeepConnection()</code> were removed. Keeping the connection is the default behavior for now.</p>
<h3 id="removed-qnearfieldtarget-isprocessingcommand">Removed QNearFieldTarget::isProcessingCommand</h3>
<p>The method was never implemented and always returned <code translate="no">false</code>.</p>
<h3 id="made-qnearfieldtarget-setresponseforrequest-private-api">Made QNearFieldTarget::setResponseForRequest private API</h3>
<p>The method should not be exposed as a public API. Use <a href="qnearfieldtarget.html#ndefMessageRead" translate="no">QNearFieldTarget::ndefMessageRead</a> or <a href="qnearfieldtarget.html#requestResponse" translate="no">QNearFieldTarget::requestResponse</a> to read the data from an NFC tag.</p>
<h3 id="removed-qnearfieldtarget-handleresponse">Removed QNearFieldTarget::handleResponse</h3>
<p>The method was removed as it just forwarded the call to <code translate="no">QNearFieldManager::setResponseForRequest</code>, which became private API.</p>
<h3 id="made-qnearfieldtarget-reporterror-private-api">Made QNearFieldTarget::reportError private API</h3>
<p>A <a href="qnearfieldtarget.html#error" translate="no">QNearFieldTarget::error</a> signal can be used instead.</p>
<h3 id="removed-qnearfieldtarget-ndefmessageswritten-signal">Removed QNearFieldTarget::ndefMessagesWritten signal</h3>
<p>The <a href="qnearfieldtarget.html#requestCompleted" translate="no">QNearFieldTarget::requestCompleted</a> signal is used for both NDEF messages and custom commands. The <code translate="no">id</code> parameter can be used to check which request is actually completed.</p>
<h3 id="removed-qnearfieldmanager-un-registerndefmessagehandler">Removed QNearFieldManager::(un)registerNdefMessageHandler</h3>
<p>The methods <code translate="no">QNearFieldTarget::registerNdefMessageHandler</code> and <code translate="no">QNearFieldTarget::unregisterNdefMessageHandler</code> were removed.</p>
<p>Use <a href="qnearfieldtarget.html#ndefMessageRead" translate="no">QNearFieldTarget::ndefMessageRead</a>() and <a href="qndeffilter.html#match" translate="no">QNdefFilter::match</a>() to detect the NDEF messages and filter the required ones.</p>
<div class="admonition note">
<p><b>Note: </b>The application can still be automatically started once the NDEF Tag is touched. The <a href="qtnfc-annotatedurl-example.html" translate="no">Annotated URL</a> example shows how to achieve it on Android.</p>
</div>
<h3 id="removed-qnearfieldmanager-targetaccessmodes">Removed QNearFieldManager::TargetAccessModes</h3>
<p>The <code translate="no">TargetAccessModes</code> enum was removed together with the getter and setter methods (<code translate="no">QNearFieldManager::setTargetAccessModes()</code> and <code translate="no">QNearFieldManager::targetAccessModes()</code>).</p>
<p>The feature is not supported on Android and iOS platforms.</p>
<h3 id="removed-qnearfieldsharemanager-and-qnearfieldsharetarget">Removed QNearFieldShareManager and QNearFieldShareTarget</h3>
<p>File sharing via NFC is deprecated on Android in API 29. Other technologies should be used instead.</p>
<h3 id="removed-qml-api">Removed QML API</h3>
<p>The support for QML API is discontinued.</p>
</div>
<!-- @@@qtnfc-changes-qt6.html -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
