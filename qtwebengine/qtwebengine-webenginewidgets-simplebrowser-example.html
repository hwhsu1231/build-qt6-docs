<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- simplebrowser.qdoc -->
  <meta name="description" content="A simple browser based on Qt WebEngine Widgets.">
  <title>WebEngine Widgets Simple Browser Example | Qt WebEngine 6.6.2</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.6</a></li>
<li><a href="qtwebengine-index.html" translate="no">Qt WebEngine</a></li>
<li><a href="webengine-widgetexamples.html" translate="no">Qt WebEngine Widgets Examples</a></li>
<li>WebEngine Widgets Simple Browser Example</li>
<li id="buildversion"><a href="qtwebengine-index.html" translate="no">Qt 6.6.2 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#running-the-example">Running the Example</a></li>
<li class="level1"><a href="#class-hierarchy">Class Hierarchy</a></li>
<li class="level1"><a href="#creating-the-browser-main-window">Creating the Browser Main Window</a></li>
<li class="level1"><a href="#creating-tabs">Creating Tabs</a></li>
<li class="level1"><a href="#implementing-webview-functionality">Implementing WebView Functionality</a></li>
<li class="level2"><a href="#displaying-error-messages">Displaying Error Messages</a></li>
<li class="level2"><a href="#managing-webwindows">Managing WebWindows</a></li>
<li class="level2"><a href="#adding-context-menu-items">Adding Context Menu Items</a></li>
<li class="level1"><a href="#implementing-webpage-and-webview-functionality">Implementing WebPage and WebView Functionality</a></li>
<li class="level1"><a href="#opening-a-web-page">Opening a Web Page</a></li>
<li class="level1"><a href="#implementing-private-browsing">Implementing Private Browsing</a></li>
<li class="level1"><a href="#managing-downloads">Managing Downloads</a></li>
<li class="level1"><a href="#signing-requirement-for-macos">Signing Requirement for macOS</a></li>
<li class="level1"><a href="#files-and-attributions">Files and Attributions</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">WebEngine Widgets Simple Browser Example</h1>
<!-- $$$webenginewidgets/simplebrowser-brief -->
<p>A simple browser based on Qt WebEngine Widgets.</p>
<!-- @@@webenginewidgets/simplebrowser -->
<!-- $$$webenginewidgets/simplebrowser-description -->
<div class="descr" id="details">
<p class="centerAlign"><img src="images/simplebrowser.png" alt="" /></p><p><i>Simple Browser</i> demonstrates how to use the <a href="qtwebenginewidgets-module.html" translate="no">Qt WebEngine C++ classes</a> to develop a small Web browser application that contains the following elements:</p>
<ul>
<li>Menu bar for opening stored pages and managing windows and tabs.</li>
<li>Navigation bar for entering a URL and for moving backward and forward in the web page browsing history.</li>
<li>Multi-tab area for displaying web content within tabs.</li>
<li>Status bar for displaying hovered links.</li>
<li>A simple download manager.</li>
</ul>
<p>The web content can be opened in new tabs or separate windows. HTTP and proxy authentication can be used for accessing web pages.</p>
<h4 id="running-the-example">Running the Example</h4>
<p>To run the example from <a href="https://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b translate="no">Welcome</b> mode and select the example from <b translate="no">Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<h4 id="class-hierarchy">Class Hierarchy</h4>
<p>We start with sketching a diagram of the main classes that we are going to implement:</p>
<p class="centerAlign"><img src="images/simplebrowser-model.png" alt="" /></p><ul>
<li><code translate="no">Browser</code> is a class managing the application windows.</li>
<li><code translate="no">BrowserWindow</code> is a <a href="../qtwidgets/qmainwindow.html" translate="no">QMainWindow</a> showing the menu, a navigation bar, <code translate="no">TabWidget</code>, and a status bar.</li>
<li><code translate="no">TabWidget</code> is a <a href="../qtwidgets/qtabwidget.html" translate="no">QTabWidget</a> and contains one or multiple browser tabs.</li>
<li><code translate="no">WebView</code> is a <a href="qwebengineview.html" translate="no">QWebEngineView</a>, provides a view for <code translate="no">WebPage</code>, and is added as a tab in <code translate="no">TabWidget</code>.</li>
<li><code translate="no">WebPage</code> is a <a href="qwebenginepage.html" translate="no">QWebEnginePage</a> that represents website content.</li>
</ul>
<p>Additionally, we will implement some auxiliary classes:</p>
<ul>
<li><code translate="no">WebPopupWindow</code> is a <a href="../qtwidgets/qwidget.html" translate="no">QWidget</a> for showing popup windows.</li>
<li><code translate="no">DownloadManagerWidget</code> is a <a href="../qtwidgets/qwidget.html" translate="no">QWidget</a> implementing the downloads list.</li>
</ul>
<h4 id="creating-the-browser-main-window">Creating the Browser Main Window</h4>
<p>This example supports multiple main windows that are owned by a <code translate="no">Browser</code> object. This class also owns the <code translate="no">DownloadManagerWidget</code> and could be used for further functionality, such as bookmarks and history managers.</p>
<p>In <code translate="no">main.cpp</code>, we create the first <code translate="no">BrowserWindow</code> instance and add it to the <code translate="no">Browser</code> object. If no arguments are passed on the command line, we open the <a href="http://qt.io/" translate="no">Qt Homepage</a>:</p>
<pre class="cpp" translate="no">
 <span class="type">int</span> main(<span class="type">int</span> argc<span class="operator">,</span> <span class="type">char</span> <span class="operator">*</span><span class="operator">*</span>argv)
 {
     <span class="type"><a href="../qtcore/qcoreapplication.html" translate="no">QCoreApplication</a></span><span class="operator">::</span>setOrganizationName(<span class="string">&quot;QtExamples&quot;</span>);

     <span class="type"><a href="../qtwidgets/qapplication.html" translate="no">QApplication</a></span> app(argc<span class="operator">,</span> argv);
     app<span class="operator">.</span>setWindowIcon(<span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span>(u<span class="string">&quot;:AppLogoColor.png&quot;</span>_s));
     <span class="type"><a href="../qtcore/qloggingcategory.html" translate="no">QLoggingCategory</a></span><span class="operator">::</span>setFilterRules(u<span class="string">&quot;qt.webenginecontext.debug=true&quot;</span>_s);

     <span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>defaultProfile()<span class="operator">-</span><span class="operator">&gt;</span>settings()<span class="operator">-</span><span class="operator">&gt;</span>setAttribute(<span class="type"><a href="qwebenginesettings.html" translate="no">QWebEngineSettings</a></span><span class="operator">::</span>PluginsEnabled<span class="operator">,</span> <span class="keyword">true</span>);
     <span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>defaultProfile()<span class="operator">-</span><span class="operator">&gt;</span>settings()<span class="operator">-</span><span class="operator">&gt;</span>setAttribute(<span class="type"><a href="qwebenginesettings.html" translate="no">QWebEngineSettings</a></span><span class="operator">::</span>DnsPrefetchEnabled<span class="operator">,</span> <span class="keyword">true</span>);

     <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> url <span class="operator">=</span> commandLineUrlArgument();

     Browser browser;
     BrowserWindow <span class="operator">*</span>window <span class="operator">=</span> browser<span class="operator">.</span>createHiddenWindow();
     window<span class="operator">-</span><span class="operator">&gt;</span>tabWidget()<span class="operator">-</span><span class="operator">&gt;</span>setUrl(url);
     window<span class="operator">-</span><span class="operator">&gt;</span>show();
     <span class="keyword">return</span> app<span class="operator">.</span>exec();
 }
</pre>
<p>To suppress flicker when switching the window to OpenGL rendering, we call show after the first browser tab has been added.</p>
<h4 id="creating-tabs">Creating Tabs</h4>
<p>The <code translate="no">BrowserWindow</code> constructor initializes all the necessary user interface related objects. The <code translate="no">centralWidget</code> of <code translate="no">BrowserWindow</code> contains an instance of <code translate="no">TabWidget</code>. The <code translate="no">TabWidget</code> contains one or several <code translate="no">WebView</code> instances as tabs, and delegates it's signals and slots to the currently selected one:</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> TabWidget : <span class="keyword">public</span> <span class="type"><a href="../qtwidgets/qtabwidget.html" translate="no">QTabWidget</a></span>
 {
     ...
 <span class="keyword">signals</span>:
     <span class="comment">// current tab/page signals</span>
     <span class="type">void</span> linkHovered(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>link);
     <span class="type">void</span> loadProgress(<span class="type">int</span> progress);
     <span class="type">void</span> titleChanged(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>title);
     <span class="type">void</span> urlChanged(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>url);
     <span class="type">void</span> favIconChanged(<span class="keyword">const</span> <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span> <span class="operator">&amp;</span>icon);
     <span class="type">void</span> webActionEnabledChanged(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction action<span class="operator">,</span> <span class="type">bool</span> enabled);
     <span class="type">void</span> devToolsRequested(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span> <span class="operator">*</span>source);
     <span class="type">void</span> findTextFinished(<span class="keyword">const</span> <span class="type"><a href="qwebenginefindtextresult.html" translate="no">QWebEngineFindTextResult</a></span> <span class="operator">&amp;</span>result);

 <span class="keyword">public</span> <span class="keyword">slots</span>:
     <span class="comment">// current tab/page slots</span>
     <span class="type">void</span> setUrl(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>url);
     <span class="type">void</span> triggerWebPageAction(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction action);
     ...
 };
</pre>
<p>Each tab contains an instance of <code translate="no">WebView</code>:</p>
<pre class="cpp" translate="no">
 WebView <span class="operator">*</span>TabWidget<span class="operator">::</span>createTab()
 {
     WebView <span class="operator">*</span>webView <span class="operator">=</span> createBackgroundTab();
     setCurrentWidget(webView);
     <span class="keyword">return</span> webView;
 }

 WebView <span class="operator">*</span>TabWidget<span class="operator">::</span>createBackgroundTab()
 {
     WebView <span class="operator">*</span>webView <span class="operator">=</span> <span class="keyword">new</span> WebView;
     WebPage <span class="operator">*</span>webPage <span class="operator">=</span> <span class="keyword">new</span> WebPage(m_profile<span class="operator">,</span> webView);
     webView<span class="operator">-</span><span class="operator">&gt;</span>setPage(webPage);
     setupView(webView);
     <span class="type">int</span> index <span class="operator">=</span> addTab(webView<span class="operator">,</span> tr(<span class="string">&quot;(Untitled)&quot;</span>));
     setTabIcon(index<span class="operator">,</span> webView<span class="operator">-</span><span class="operator">&gt;</span>favIcon());
     <span class="comment">// Workaround for QTBUG-61770</span>
     webView<span class="operator">-</span><span class="operator">&gt;</span>resize(currentWidget()<span class="operator">-</span><span class="operator">&gt;</span>size());
     webView<span class="operator">-</span><span class="operator">&gt;</span>show();
     <span class="keyword">return</span> webView;
 }
</pre>
<p>In <code translate="no">TabWidget::setupView()</code>, we make sure that the <code translate="no">TabWidget</code> always forwards the signals of the currently selected <code translate="no">WebView</code>:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> TabWidget<span class="operator">::</span>setupView(WebView <span class="operator">*</span>webView)
 {
     <span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span> <span class="operator">*</span>webPage <span class="operator">=</span> webView<span class="operator">-</span><span class="operator">&gt;</span>page();

     connect(webView<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qwebengineview.html" translate="no">QWebEngineView</a></span><span class="operator">::</span>titleChanged<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>title) {
         <span class="type">int</span> index <span class="operator">=</span> indexOf(webView);
         <span class="keyword">if</span> (index <span class="operator">!</span><span class="operator">=</span> <span class="operator">-</span><span class="number">1</span>) {
             setTabText(index<span class="operator">,</span> title);
             setTabToolTip(index<span class="operator">,</span> title);
         }
         <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> index)
             <span class="keyword">emit</span> titleChanged(title);
     });
     connect(webView<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qwebengineview.html" translate="no">QWebEngineView</a></span><span class="operator">::</span>urlChanged<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>url) {
         <span class="type">int</span> index <span class="operator">=</span> indexOf(webView);
         <span class="keyword">if</span> (index <span class="operator">!</span><span class="operator">=</span> <span class="operator">-</span><span class="number">1</span>)
             tabBar()<span class="operator">-</span><span class="operator">&gt;</span>setTabData(index<span class="operator">,</span> url);
         <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> index)
             <span class="keyword">emit</span> urlChanged(url);
     });
     connect(webView<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qwebengineview.html" translate="no">QWebEngineView</a></span><span class="operator">::</span>loadProgress<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="type">int</span> progress) {
         <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> indexOf(webView))
             <span class="keyword">emit</span> loadProgress(progress);
     });
     connect(webPage<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>linkHovered<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>url) {
         <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> indexOf(webView))
             <span class="keyword">emit</span> linkHovered(url);
     });
     connect(webView<span class="operator">,</span> <span class="operator">&amp;</span>WebView<span class="operator">::</span>favIconChanged<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span> <span class="operator">&amp;</span>icon) {
         <span class="type">int</span> index <span class="operator">=</span> indexOf(webView);
         <span class="keyword">if</span> (index <span class="operator">!</span><span class="operator">=</span> <span class="operator">-</span><span class="number">1</span>)
             setTabIcon(index<span class="operator">,</span> icon);
         <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> index)
             <span class="keyword">emit</span> favIconChanged(icon);
     });
     connect(webView<span class="operator">,</span> <span class="operator">&amp;</span>WebView<span class="operator">::</span>webActionEnabledChanged<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction action<span class="operator">,</span> <span class="type">bool</span> enabled) {
         <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span>  indexOf(webView))
             <span class="keyword">emit</span> webActionEnabledChanged(action<span class="operator">,</span>enabled);
     });
     connect(webPage<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>windowCloseRequested<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>() {
         <span class="type">int</span> index <span class="operator">=</span> indexOf(webView);
         <span class="keyword">if</span> (webView<span class="operator">-</span><span class="operator">&gt;</span>page()<span class="operator">-</span><span class="operator">&gt;</span>inspectedPage())
             window()<span class="operator">-</span><span class="operator">&gt;</span>close();
         <span class="keyword">else</span> <span class="keyword">if</span> (index <span class="operator">&gt;</span><span class="operator">=</span> <span class="number">0</span>)
             closeTab(index);
     });
     connect(webView<span class="operator">,</span> <span class="operator">&amp;</span>WebView<span class="operator">::</span>devToolsRequested<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>TabWidget<span class="operator">::</span>devToolsRequested);
     connect(webPage<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>findTextFinished<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> webView<span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="qwebenginefindtextresult.html" translate="no">QWebEngineFindTextResult</a></span> <span class="operator">&amp;</span>result) {
         <span class="keyword">if</span> (currentIndex() <span class="operator">=</span><span class="operator">=</span> indexOf(webView))
             <span class="keyword">emit</span> findTextFinished(result);
     });
 }
</pre>
<h4 id="implementing-webview-functionality">Implementing WebView Functionality</h4>
<p>The <code translate="no">WebView</code> is derived from <a href="qwebengineview.html" translate="no">QWebEngineView</a> to support the following functionality:</p>
<ul>
<li>Displaying error messages in case <code translate="no">renderProcess</code> dies</li>
<li>Handling <code translate="no">createWindow</code> requests</li>
<li>Adding custom menu items to context menus</li>
</ul>
<p>First, we create the <a href="../qtwebview/qml-qtwebview-webview.html" translate="no">WebView</a> with the necessary methods and signals:</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> WebView : <span class="keyword">public</span> <span class="type"><a href="qwebengineview.html" translate="no">QWebEngineView</a></span>
 {
     Q_OBJECT

 <span class="keyword">public</span>:
     <span class="keyword">explicit</span> WebView(<span class="type"><a href="../qtwidgets/qwidget.html" translate="no">QWidget</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);
     ...
 <span class="keyword">protected</span>:
     <span class="type">void</span> contextMenuEvent(<span class="type"><a href="../qtgui/qcontextmenuevent.html" translate="no">QContextMenuEvent</a></span> <span class="operator">*</span>event) override;
     <span class="type"><a href="qwebengineview.html" translate="no">QWebEngineView</a></span> <span class="operator">*</span>createWindow(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebWindowType type) override;

 <span class="keyword">signals</span>:
     <span class="type">void</span> webActionEnabledChanged(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction webAction<span class="operator">,</span> <span class="type">bool</span> enabled);
     ...
 };
</pre>
<h5 id="displaying-error-messages">Displaying Error Messages</h5>
<p>If the render process is terminated, we display a <a href="../qtwidgets/qmessagebox.html" translate="no">QMessageBox</a> with an error code, and then we reload the page:</p>
<pre class="cpp" translate="no">
 WebView<span class="operator">::</span>WebView(<span class="type"><a href="../qtwidgets/qwidget.html" translate="no">QWidget</a></span> <span class="operator">*</span>parent)
     : <span class="type"><a href="qwebengineview.html" translate="no">QWebEngineView</a></span>(parent)
 {
     ...
     connect(<span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qwebengineview.html" translate="no">QWebEngineView</a></span><span class="operator">::</span>renderProcessTerminated<span class="operator">,</span>
             <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span>(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>RenderProcessTerminationStatus termStatus<span class="operator">,</span> <span class="type">int</span> statusCode) {
         <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> status;
         <span class="keyword">switch</span> (termStatus) {
         <span class="keyword">case</span> <span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>NormalTerminationStatus:
             status <span class="operator">=</span> tr(<span class="string">&quot;Render process normal exit&quot;</span>);
             <span class="keyword">break</span>;
         <span class="keyword">case</span> <span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>AbnormalTerminationStatus:
             status <span class="operator">=</span> tr(<span class="string">&quot;Render process abnormal exit&quot;</span>);
             <span class="keyword">break</span>;
         <span class="keyword">case</span> <span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>CrashedTerminationStatus:
             status <span class="operator">=</span> tr(<span class="string">&quot;Render process crashed&quot;</span>);
             <span class="keyword">break</span>;
         <span class="keyword">case</span> <span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>KilledTerminationStatus:
             status <span class="operator">=</span> tr(<span class="string">&quot;Render process killed&quot;</span>);
             <span class="keyword">break</span>;
         }
         <span class="type"><a href="../qtwidgets/qmessagebox.html" translate="no">QMessageBox</a></span><span class="operator">::</span>StandardButton btn <span class="operator">=</span> <span class="type"><a href="../qtwidgets/qmessagebox.html" translate="no">QMessageBox</a></span><span class="operator">::</span>question(window()<span class="operator">,</span> status<span class="operator">,</span>
                                                    tr(<span class="string">&quot;Render process exited with code: %1\n&quot;</span>
                                                       <span class="string">&quot;Do you want to reload the page ?&quot;</span>)<span class="operator">.</span>arg(statusCode));
         <span class="keyword">if</span> (btn <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="../qtwidgets/qmessagebox.html" translate="no">QMessageBox</a></span><span class="operator">::</span>Yes)
             <span class="type"><a href="../qtcore/qtimer.html" translate="no">QTimer</a></span><span class="operator">::</span>singleShot(<span class="number">0</span><span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>WebView<span class="operator">::</span>reload);
     });
 }
</pre>
<h5 id="managing-webwindows">Managing WebWindows</h5>
<p>The loaded page might want to create windows of the type <a href="qwebenginepage.html#WebWindowType-enum" translate="no">QWebEnginePage::WebWindowType</a>, for example, when a JavaScript program requests to open a document in a new window or dialog. This is handled by overriding <code translate="no">QWebView::createWindow()</code>:</p>
<pre class="cpp" translate="no">
 <span class="type"><a href="qwebengineview.html" translate="no">QWebEngineView</a></span> <span class="operator">*</span>WebView<span class="operator">::</span>createWindow(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebWindowType type)
 {
     BrowserWindow <span class="operator">*</span>mainWindow <span class="operator">=</span> qobject_cast<span class="operator">&lt;</span>BrowserWindow<span class="operator">*</span><span class="operator">&gt;</span>(window());
     <span class="keyword">if</span> (<span class="operator">!</span>mainWindow)
         <span class="keyword">return</span> nullptr;

     <span class="keyword">switch</span> (type) {
     <span class="keyword">case</span> <span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebBrowserTab: {
         <span class="keyword">return</span> mainWindow<span class="operator">-</span><span class="operator">&gt;</span>tabWidget()<span class="operator">-</span><span class="operator">&gt;</span>createTab();
     }
</pre>
<p>In case of <code translate="no">QWebEnginePage::WebDialog</code>, we create an instance of a custom <code translate="no">WebPopupWindow</code> class:</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> WebPopupWindow : <span class="keyword">public</span> <span class="type"><a href="../qtwidgets/qwidget.html" translate="no">QWidget</a></span>
 {
     Q_OBJECT

 <span class="keyword">public</span>:
     <span class="keyword">explicit</span> WebPopupWindow(<span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span> <span class="operator">*</span>profile);
     WebView <span class="operator">*</span>view() <span class="keyword">const</span>;

 <span class="keyword">private</span> <span class="keyword">slots</span>:
     <span class="type">void</span> handleGeometryChangeRequested(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qrect.html" translate="no">QRect</a></span> <span class="operator">&amp;</span>newGeometry);

 <span class="keyword">private</span>:
     <span class="type"><a href="../qtwidgets/qlineedit.html" translate="no">QLineEdit</a></span> <span class="operator">*</span>m_urlLineEdit;
     <span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span> <span class="operator">*</span>m_favAction;
     WebView <span class="operator">*</span>m_view;
 };
</pre>
<h5 id="adding-context-menu-items">Adding Context Menu Items</h5>
<p>We add a menu item to the context menu, so that users can right-click to have an inspector opened in a new window. We override <a href="qwebengineview.html#contextMenuEvent" translate="no">QWebEngineView::contextMenuEvent</a> and use QWebEnginePage::createStandardContextMenu to create a default <a href="../qtwidgets/qmenu.html" translate="no">QMenu</a> with a default list of <a href="qwebenginepage.html#WebAction-enum" translate="no">QWebEnginePage::WebAction</a> actions.</p>
<p>The default name for <a href="qwebenginepage.html#WebAction-enum" translate="no">QWebEnginePage::InspectElement</a> action is <b translate="no">Inspect</b>. For clarity, we rename it to <b translate="no">Open Inspector In New Window</b> when there is no Inspector present yet, and <b translate="no">Inspect Element</b> when it's already created.</p>
<p>We also check if the <a href="qwebenginepage.html#WebAction-enum" translate="no">QWebEnginePage::ViewSource</a> action is in the menu, because if it's not we have to add a separator as well.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> WebView<span class="operator">::</span>contextMenuEvent(<span class="type"><a href="../qtgui/qcontextmenuevent.html" translate="no">QContextMenuEvent</a></span> <span class="operator">*</span>event)
 {
     <span class="type"><a href="../qtwidgets/qmenu.html" translate="no">QMenu</a></span> <span class="operator">*</span>menu <span class="operator">=</span> createStandardContextMenu();
     <span class="keyword">const</span> <span class="type"><a href="../qtcore/qlist.html" translate="no">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span> <span class="operator">*</span><span class="operator">&gt;</span> actions <span class="operator">=</span> menu<span class="operator">-</span><span class="operator">&gt;</span>actions();
     <span class="keyword">auto</span> inspectElement <span class="operator">=</span> std<span class="operator">::</span>find(actions<span class="operator">.</span>cbegin()<span class="operator">,</span> actions<span class="operator">.</span>cend()<span class="operator">,</span> page()<span class="operator">-</span><span class="operator">&gt;</span>action(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>InspectElement));
     <span class="keyword">if</span> (inspectElement <span class="operator">=</span><span class="operator">=</span> actions<span class="operator">.</span>cend()) {
         <span class="keyword">auto</span> viewSource <span class="operator">=</span> std<span class="operator">::</span>find(actions<span class="operator">.</span>cbegin()<span class="operator">,</span> actions<span class="operator">.</span>cend()<span class="operator">,</span> page()<span class="operator">-</span><span class="operator">&gt;</span>action(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>ViewSource));
         <span class="keyword">if</span> (viewSource <span class="operator">=</span><span class="operator">=</span> actions<span class="operator">.</span>cend())
             menu<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();

         <span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span> <span class="operator">*</span>action <span class="operator">=</span> menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(<span class="string">&quot;Open inspector in new window&quot;</span>);
         connect(action<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span><span class="operator">::</span>triggered<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span>() { <span class="keyword">emit</span> devToolsRequested(page()); });
     } <span class="keyword">else</span> {
         (<span class="operator">*</span>inspectElement)<span class="operator">-</span><span class="operator">&gt;</span>setText(tr(<span class="string">&quot;Inspect element&quot;</span>));
     }
     menu<span class="operator">-</span><span class="operator">&gt;</span>popup(event<span class="operator">-</span><span class="operator">&gt;</span>globalPos());
 }
</pre>
<h4 id="implementing-webpage-and-webview-functionality">Implementing WebPage and WebView Functionality</h4>
<p>We implement <code translate="no">WebPage</code> as a subclass of <a href="qwebenginepage.html" translate="no">QWebEnginePage</a> and <code translate="no">WebView</code> as as subclass of <a href="qwebengineview.html" translate="no">QWebEngineView</a> to enable HTTP, proxy authentication, as well as ignoring SSL certificate errors when accessing web pages:</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> WebPage : <span class="keyword">public</span> <span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span>
 {
     Q_OBJECT

 <span class="keyword">public</span>:
     <span class="keyword">explicit</span> WebPage(<span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span> <span class="operator">*</span>profile<span class="operator">,</span> <span class="type"><a href="../qtcore/qobject.html" translate="no">QObject</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);

 <span class="keyword">signals</span>:
     <span class="type">void</span> createCertificateErrorDialog(<span class="type"><a href="qwebenginecertificateerror.html" translate="no">QWebEngineCertificateError</a></span> error);

 <span class="keyword">private</span> <span class="keyword">slots</span>:
     <span class="type">void</span> handleCertificateError(<span class="type"><a href="qwebenginecertificateerror.html" translate="no">QWebEngineCertificateError</a></span> error);
     <span class="type">void</span> handleSelectClientCertificate(<span class="type"><a href="qwebengineclientcertificateselection.html" translate="no">QWebEngineClientCertificateSelection</a></span> clientCertSelection);
 };

 <span class="keyword">class</span> WebView : <span class="keyword">public</span> <span class="type"><a href="qwebengineview.html" translate="no">QWebEngineView</a></span>
 {
     Q_OBJECT

 <span class="keyword">public</span>:
     <span class="keyword">explicit</span> WebView(<span class="type"><a href="../qtwidgets/qwidget.html" translate="no">QWidget</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);
     <span class="type">void</span> setPage(WebPage <span class="operator">*</span>page);

     <span class="type">int</span> loadProgress() <span class="keyword">const</span>;
     <span class="type">bool</span> isWebActionEnabled(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction webAction) <span class="keyword">const</span>;
     <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span> favIcon() <span class="keyword">const</span>;

 <span class="keyword">protected</span>:
     <span class="type">void</span> contextMenuEvent(<span class="type"><a href="../qtgui/qcontextmenuevent.html" translate="no">QContextMenuEvent</a></span> <span class="operator">*</span>event) override;
     <span class="type"><a href="qwebengineview.html" translate="no">QWebEngineView</a></span> <span class="operator">*</span>createWindow(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebWindowType type) override;

 <span class="keyword">signals</span>:
     <span class="type">void</span> webActionEnabledChanged(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction webAction<span class="operator">,</span> <span class="type">bool</span> enabled);
     <span class="type">void</span> favIconChanged(<span class="keyword">const</span> <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span> <span class="operator">&amp;</span>icon);
     <span class="type">void</span> devToolsRequested(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span> <span class="operator">*</span>source);
 <span class="keyword">private</span> <span class="keyword">slots</span>:
     <span class="type">void</span> handleCertificateError(<span class="type"><a href="qwebenginecertificateerror.html" translate="no">QWebEngineCertificateError</a></span> error);
     <span class="type">void</span> handleAuthenticationRequired(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>requestUrl<span class="operator">,</span> <span class="type"><a href="../qtnetwork/qauthenticator.html" translate="no">QAuthenticator</a></span> <span class="operator">*</span>auth);
     <span class="type">void</span> handleFeaturePermissionRequested(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>securityOrigin<span class="operator">,</span>
                                           <span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>Feature feature);
     <span class="type">void</span> handleProxyAuthenticationRequired(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>requestUrl<span class="operator">,</span> <span class="type"><a href="../qtnetwork/qauthenticator.html" translate="no">QAuthenticator</a></span> <span class="operator">*</span>auth<span class="operator">,</span>
                                            <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>proxyHost);
     <span class="type">void</span> handleRegisterProtocolHandlerRequested(<span class="type"><a href="qwebengineregisterprotocolhandlerrequest.html" translate="no">QWebEngineRegisterProtocolHandlerRequest</a></span> request);
 <span class="preprocessor">#if QT_VERSION &gt;= QT_VERSION_CHECK(6, 4, 0)</span>
     <span class="type">void</span> handleFileSystemAccessRequested(<span class="type"><a href="qwebenginefilesystemaccessrequest.html" translate="no">QWebEngineFileSystemAccessRequest</a></span> request);
 <span class="preprocessor">#endif</span>

 <span class="keyword">private</span>:
     <span class="type">void</span> createWebActionTrigger(<span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span> <span class="operator">*</span>page<span class="operator">,</span> <span class="type"><a href="qwebenginepage.html" translate="no">QWebEnginePage</a></span><span class="operator">::</span>WebAction);

 <span class="keyword">private</span>:
     <span class="type">int</span> m_loadProgress <span class="operator">=</span> <span class="number">100</span>;
 };
</pre>
<p>In all the cases above, we display the appropriate dialog to the user. In case of authentication, we need to set the correct credential values on the <a href="../qtnetwork/qauthenticator.html" translate="no">QAuthenticator</a> object:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> WebView<span class="operator">::</span>handleAuthenticationRequired(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>requestUrl<span class="operator">,</span> <span class="type"><a href="../qtnetwork/qauthenticator.html" translate="no">QAuthenticator</a></span> <span class="operator">*</span>auth)
 {
     <span class="type"><a href="../qtwidgets/qdialog.html" translate="no">QDialog</a></span> dialog(window());
     dialog<span class="operator">.</span>setModal(<span class="keyword">true</span>);
     dialog<span class="operator">.</span>setWindowFlags(dialog<span class="operator">.</span>windowFlags() <span class="operator">&amp;</span> <span class="operator">~</span><span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>WindowContextHelpButtonHint);

     Ui<span class="operator">::</span>PasswordDialog passwordDialog;
     passwordDialog<span class="operator">.</span>setupUi(<span class="operator">&amp;</span>dialog);

     passwordDialog<span class="operator">.</span>m_iconLabel<span class="operator">-</span><span class="operator">&gt;</span>setText(<span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span>());
     <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span> icon(window()<span class="operator">-</span><span class="operator">&gt;</span>style()<span class="operator">-</span><span class="operator">&gt;</span>standardIcon(<span class="type"><a href="../qtwidgets/qstyle.html" translate="no">QStyle</a></span><span class="operator">::</span>SP_MessageBoxQuestion<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> window()));
     passwordDialog<span class="operator">.</span>m_iconLabel<span class="operator">-</span><span class="operator">&gt;</span>setPixmap(icon<span class="operator">.</span>pixmap(<span class="number">32</span><span class="operator">,</span> <span class="number">32</span>));

     <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> introMessage(tr(<span class="string">&quot;Enter username and password for \&quot;%1\&quot; at %2&quot;</span>)
                                  <span class="operator">.</span>arg(auth<span class="operator">-</span><span class="operator">&gt;</span>realm()<span class="operator">,</span>
                                       requestUrl<span class="operator">.</span>toString()<span class="operator">.</span>toHtmlEscaped()));
     passwordDialog<span class="operator">.</span>m_infoLabel<span class="operator">-</span><span class="operator">&gt;</span>setText(introMessage);
     passwordDialog<span class="operator">.</span>m_infoLabel<span class="operator">-</span><span class="operator">&gt;</span>setWordWrap(<span class="keyword">true</span>);

     <span class="keyword">if</span> (dialog<span class="operator">.</span>exec() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="../qtwidgets/qdialog.html" translate="no">QDialog</a></span><span class="operator">::</span>Accepted) {
         auth<span class="operator">-</span><span class="operator">&gt;</span>setUser(passwordDialog<span class="operator">.</span>m_userNameLineEdit<span class="operator">-</span><span class="operator">&gt;</span>text());
         auth<span class="operator">-</span><span class="operator">&gt;</span>setPassword(passwordDialog<span class="operator">.</span>m_passwordLineEdit<span class="operator">-</span><span class="operator">&gt;</span>text());
     } <span class="keyword">else</span> {
         <span class="comment">// Set authenticator null if dialog is cancelled</span>
         <span class="operator">*</span>auth <span class="operator">=</span> <span class="type"><a href="../qtnetwork/qauthenticator.html" translate="no">QAuthenticator</a></span>();
     }
 }
</pre>
<p>The <code translate="no">handleProxyAuthenticationRequired</code> signal handler implements the very same steps for the authentication of HTTP proxies.</p>
<p>In case of SSL errors, we just need to return a boolean value indicating whether the certificate should be ignored.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> WebPage<span class="operator">::</span>handleCertificateError(<span class="type"><a href="qwebenginecertificateerror.html" translate="no">QWebEngineCertificateError</a></span> error)
 {
     error<span class="operator">.</span>defer();
     <span class="type"><a href="../qtcore/qtimer.html" translate="no">QTimer</a></span><span class="operator">::</span>singleShot(<span class="number">0</span><span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span>
                        <span class="operator">[</span><span class="keyword">this</span><span class="operator">,</span> error<span class="operator">]</span>() <span class="keyword">mutable</span> { <span class="keyword">emit</span> createCertificateErrorDialog(error); });
 }
</pre>
<h4 id="opening-a-web-page">Opening a Web Page</h4>
<p>This section describes the workflow for opening a new page. When the user enters a URL in the navigation bar and presses <b translate="no">Enter</b>, the <code translate="no">QLineEdit::returnPressed</code> signal is emitted and the new URL is then handed over to <code translate="no">TabWidget::setUrl</code>:</p>
<pre class="cpp" translate="no">
 BrowserWindow<span class="operator">::</span>BrowserWindow(Browser <span class="operator">*</span>browser<span class="operator">,</span> <span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span> <span class="operator">*</span>profile<span class="operator">,</span> <span class="type">bool</span> forDevTools)
 {
     ...
         connect(m_urlLineEdit<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="../qtwidgets/qlineedit.html" translate="no">QLineEdit</a></span><span class="operator">::</span>returnPressed<span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span>() {
             m_tabWidget<span class="operator">-</span><span class="operator">&gt;</span>setUrl(<span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span><span class="operator">::</span>fromUserInput(m_urlLineEdit<span class="operator">-</span><span class="operator">&gt;</span>text()));
         });
     ...
 }
</pre>
<p>The call is forwarded to the currently selected tab:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> TabWidget<span class="operator">::</span>setUrl(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>url)
 {
     <span class="keyword">if</span> (WebView <span class="operator">*</span>view <span class="operator">=</span> currentWebView()) {
         view<span class="operator">-</span><span class="operator">&gt;</span>setUrl(url);
         view<span class="operator">-</span><span class="operator">&gt;</span>setFocus();
     }
 }
</pre>
<p>The <code translate="no">setUrl()</code> method of <code translate="no">WebView</code> just forwards the <code translate="no">url</code> to the associated <code translate="no">WebPage</code>, which in turn starts the downloading of the page's content in the background.</p>
<h4 id="implementing-private-browsing">Implementing Private Browsing</h4>
<p><i>Private browsing</i>, <i>incognito mode</i>, or <i>off-the-record mode</i> is a feature of many browsers where normally persistent data, such as cookies, the HTTP cache, or browsing history, is kept only in memory, leaving no trace on disk. In this example we will implement private browsing on the window level with tabs in one window all in either normal or private mode. Alternatively we could implement private browsing on the tab-level, with some tabs in a window in normal mode, others in private mode.</p>
<p>Implementing private browsing is quite easy using Qt WebEngine. All one has to do is to create a new <a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a> and use it in the <a href="qwebenginepage.html" translate="no">QWebEnginePage</a> instead of the default profile. In the example this new profile is owned by the <code translate="no">Browser</code> object:</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> Browser
 {
 <span class="keyword">public</span>:
     ...
     BrowserWindow <span class="operator">*</span>createHiddenWindow(<span class="type">bool</span> offTheRecord <span class="operator">=</span> <span class="keyword">false</span>);
     BrowserWindow <span class="operator">*</span>createWindow(<span class="type">bool</span> offTheRecord <span class="operator">=</span> <span class="keyword">false</span>);
 <span class="keyword">private</span>:
     ...
     <span class="type"><a href="../qtcore/qscopedpointer.html" translate="no">QScopedPointer</a></span><span class="operator">&lt;</span><span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span><span class="operator">&gt;</span> m_profile;
 };
</pre>
<p>Required profile for <i>private browsing</i> is created together with its first window. The default constructor for <a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a> already puts it in <i>off-the-record</i> mode.</p>
<pre class="cpp" translate="no">
 BrowserWindow <span class="operator">*</span>Browser<span class="operator">::</span>createHiddenWindow(<span class="type">bool</span> offTheRecord)
 {
     <span class="keyword">if</span> (<span class="operator">!</span>offTheRecord <span class="operator">&amp;</span><span class="operator">&amp;</span> <span class="operator">!</span>m_profile) {
         <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> name <span class="operator">=</span> u<span class="string">&quot;simplebrowser.&quot;</span>_s <span class="operator">+</span> QLatin1StringView(<a href="qtwebenginecoreglobal-h.html#qWebEngineChromiumVersion" translate="no">qWebEngineChromiumVersion</a>());
         m_profile<span class="operator">.</span>reset(<span class="keyword">new</span> <span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span>(name));
     ...
</pre>
<p>All that is left to do is to pass the appropriate profile down to the appropriate <a href="qwebenginepage.html" translate="no">QWebEnginePage</a> objects. The <code translate="no">Browser</code> object will hand to each new <code translate="no">BrowserWindow</code> either the global default profile (see <a href="qwebengineprofile.html#defaultProfile" translate="no">QWebEngineProfile::defaultProfile</a>) or one shared <i>off-the-record</i> profile instance:</p>
<pre class="cpp" translate="no">
     ...
         <span class="type"><a href="../qtcore/qobject.html" translate="no">QObject</a></span><span class="operator">::</span>connect(m_profile<span class="operator">.</span>get()<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>downloadRequested<span class="operator">,</span>
                          <span class="operator">&amp;</span>m_downloadManagerWidget<span class="operator">,</span> <span class="operator">&amp;</span>DownloadManagerWidget<span class="operator">::</span>downloadRequested);
     }
     <span class="keyword">auto</span> profile <span class="operator">=</span> <span class="operator">!</span>offTheRecord <span class="operator">?</span> m_profile<span class="operator">.</span>get() : <span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>defaultProfile();
     <span class="keyword">auto</span> mainWindow <span class="operator">=</span> <span class="keyword">new</span> BrowserWindow(<span class="keyword">this</span><span class="operator">,</span> profile<span class="operator">,</span> <span class="keyword">false</span>);
     <span class="keyword">return</span> mainWindow;
 }
</pre>
<p>The <code translate="no">BrowserWindow</code> and <code translate="no">TabWidget</code> objects will then ensure that all <a href="qwebenginepage.html" translate="no">QWebEnginePage</a> objects contained in a window will use this profile.</p>
<h4 id="managing-downloads">Managing Downloads</h4>
<p>Downloads are associated with a <a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a>. Whenever a download is triggered on a web page the <a href="qwebengineprofile.html#downloadRequested" translate="no">QWebEngineProfile::downloadRequested</a> signal is emitted with a <a href="qwebenginedownloadrequest.html" translate="no">QWebEngineDownloadRequest</a>, which in this example is forwarded to <code translate="no">DownloadManagerWidget::downloadRequested</code>:</p>
<pre class="cpp" translate="no">
 Browser<span class="operator">::</span>Browser()
 {
     <span class="comment">// Quit application if the download manager window is the only remaining window</span>
     m_downloadManagerWidget<span class="operator">.</span>setAttribute(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>WA_QuitOnClose<span class="operator">,</span> <span class="keyword">false</span>);

     <span class="type"><a href="../qtcore/qobject.html" translate="no">QObject</a></span><span class="operator">::</span>connect(
         <span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>defaultProfile()<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qwebengineprofile.html" translate="no">QWebEngineProfile</a></span><span class="operator">::</span>downloadRequested<span class="operator">,</span>
         <span class="operator">&amp;</span>m_downloadManagerWidget<span class="operator">,</span> <span class="operator">&amp;</span>DownloadManagerWidget<span class="operator">::</span>downloadRequested);
 }
</pre>
<p>This method prompts the user for a file name (with a pre-filled suggestion) and starts the download (unless the user cancels the <b translate="no">Save As</b> dialog):</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> DownloadManagerWidget<span class="operator">::</span>downloadRequested(<span class="type"><a href="qwebenginedownloadrequest.html" translate="no">QWebEngineDownloadRequest</a></span> <span class="operator">*</span>download)
 {
     Q_ASSERT(download <span class="operator">&amp;</span><span class="operator">&amp;</span> download<span class="operator">-</span><span class="operator">&gt;</span>state() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="qwebenginedownloadrequest.html" translate="no">QWebEngineDownloadRequest</a></span><span class="operator">::</span>DownloadRequested);

     <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> path <span class="operator">=</span> <span class="type"><a href="../qtwidgets/qfiledialog.html" translate="no">QFileDialog</a></span><span class="operator">::</span>getSaveFileName(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;Save as&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qdir.html" translate="no">QDir</a></span>(download<span class="operator">-</span><span class="operator">&gt;</span>downloadDirectory())<span class="operator">.</span>filePath(download<span class="operator">-</span><span class="operator">&gt;</span>downloadFileName()));
     <span class="keyword">if</span> (path<span class="operator">.</span>isEmpty())
         <span class="keyword">return</span>;

     download<span class="operator">-</span><span class="operator">&gt;</span>setDownloadDirectory(<span class="type"><a href="../qtcore/qfileinfo.html" translate="no">QFileInfo</a></span>(path)<span class="operator">.</span>path());
     download<span class="operator">-</span><span class="operator">&gt;</span>setDownloadFileName(<span class="type"><a href="../qtcore/qfileinfo.html" translate="no">QFileInfo</a></span>(path)<span class="operator">.</span>fileName());
     download<span class="operator">-</span><span class="operator">&gt;</span>accept();
     add(<span class="keyword">new</span> DownloadWidget(download));

     show();
 }
</pre>
<p>The <a href="qwebenginedownloadrequest.html" translate="no">QWebEngineDownloadRequest</a> object will periodically emit the <a href="qwebenginedownloadrequest.html#receivedBytes-prop" translate="no">receivedBytesChanged</a> signal to notify potential observers of the download progress and the <a href="qwebenginedownloadrequest.html#stateChanged" translate="no">stateChanged</a> signal when the download is finished or when an error occurs. See <code translate="no">downloadmanagerwidget.cpp</code> for an example of how these signals can be handled.</p>
<h4 id="signing-requirement-for-macos">Signing Requirement for macOS</h4>
<p>To allow web sites access to the location, camera, and microphone when running <i>Simple Browser</i> on macOS, the application needs to be signed. This is done automatically when building, but you need to set up a valid signing identity for the build environment.</p>
<h4 id="files-and-attributions">Files and Attributions</h4>
<p>The example uses icons from the Tango Icon Library:</p>
<div class="table"><table class="generic">
 <tr valign="top" class="odd"><td ><a href="qtwebengine-attribution-simplebrowser-tango.html#simplebrowser-tango" translate="no">Tango Icon Library</a></td><td >Public Domain</td></tr>
</table></div>
<p><a href="https://code.qt.io/cgit/qt/qtwebengine.git/tree/examples/webenginewidgets/simplebrowser?h=6.6" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@webenginewidgets/simplebrowser -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
