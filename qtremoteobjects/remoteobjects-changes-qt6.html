<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qt6-changes.qdoc -->
  <meta name="description" content="Migrate Qt Remote Objects to Qt 6.">
  <title>Changes to Qt Remote Objects | Qt Remote Objects 6.6.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.6</a></li>
<li><a href="qtremoteobjects-index.html" translate="no">Qt Remote Objects</a></li>
<li>Changes to Qt Remote Objects</li>
<li id="buildversion"><a href="qtremoteobjects-index.html" translate="no">Qt 6.6&#x2e;0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#api-changes">API changes</a></li>
<li class="level2"><a href="#functions-taking-const-ref-qstring-changing-to-qstringview">Functions taking const-ref QString changing to QStringView</a></li>
<li class="level2"><a href="#changes-to-classes-for-custom-transport-backend-support">Changes to classes for custom transport backend support</a></li>
<li class="level1"><a href="#cmake-changes">CMake changes</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Changes to Qt Remote Objects</h1>
<!-- $$$remoteobjects-changes-qt6.html-description -->
<div class="descr" id="details">
<p>Qt 6 is a result of the conscious effort to make the framework more efficient and easy to use.</p>
<p>We try to maintain binary and source compatibility for all the public APIs in each release. But some changes were inevitable in an effort to make Qt a better framework.</p>
<p>In this topic we summarize those changes in Qt Remote Objects, and provide guidance to handle them.</p>
<h2 id="api-changes">API changes</h2>
<h3 id="functions-taking-const-ref-qstring-changing-to-qstringview">Functions taking const-ref QString changing to QStringView</h3>
<p><a href="qremoteobjecthostbase.html#proxy" translate="no">QRemoteObjectHostBase::proxy</a>, <a href="qremoteobjecthostbase.html#reverseProxy" translate="no">QRemoteObjectHostBase::reverseProxy</a> and <a href="qremoteobjectnode.html#instances" translate="no">QRemoteObjectNode::instances</a> now accept a <a href="../qtcore/qstringview.html" translate="no">QStringView</a> instead of <code translate="no">const QString &amp;</code>. The largest difference caused by this is that it no longer accepts implicit conversion from string literals (i.e&#x2e; <code translate="no">node.instances(&quot;abc&quot;);</code>). Instead, you could use a UTF-16 string literal (<code translate="no">node.instances(u&quot;abc&quot;)</code>).</p>
<h3 id="changes-to-classes-for-custom-transport-backend-support">Changes to classes for custom transport backend support</h3>
<p>The &quot;semi-private&quot; <code translate="no">IoDeviceBase</code>, <code translate="no">ServerIoDevice</code>, and <code translate="no">ClientIoDevice</code> classes are now renamed to <code translate="no">QtROIoDeviceBase</code>, <code translate="no">QtROServerIoDevice</code>, and <code translate="no">QtROClientIoDevice</code> respectively, to be consistent with naming in Qt. They are also moved from the private <code translate="no">qconnectionfactories_p.h</code> header to <code translate="no">qconnectionfactories.h</code>.</p>
<div class="admonition note">
<p><b>Note: </b>These classes are provided to give more flexibility for implementing custom communication protocols for Qt Remote Objects, but there are no source or binary compatibility guarantees for them. We recommend using the <a href="qremoteobjectnode.html#addClientSideConnection" translate="no">QRemoteObjectNode::addClientSideConnection</a>() and <a href="qremoteobjecthostbase.html#addHostSideConnection" translate="no">QRemoteObjectHostBase::addHostSideConnection</a>() methods, if you need support for <a href="qtremoteobjects-external-schemas.html#external-qiodevices" translate="no">external</a> communication channels.</p>
</div>
<h2 id="cmake-changes">CMake changes</h2>
<p>The <code translate="no">cmake</code> instructions for calling <a href="qtremoteobjects-repc.html" translate="no">repc</a> and adding the generated <code translate="no">.rep</code> files to a CMake project have slightly changed. Instead of the <code translate="no">qt5_generate_repc</code> macro, you should now use <code translate="no">qt6_add_repc_sources</code>, <code translate="no">qt6_add_repc_replicas</code> and <code translate="no">qt6_add_repc_merged</code> functions. For example, the following code:</p>
<pre class="cpp" translate="no">
 set(SOURCES
     main<span class="operator">.</span>cpp
     simpleswitch<span class="operator">.</span>cpp
 )

 qt5_generate_repc(SOURCES simpleswitch<span class="operator">.</span>rep SOURCE)
 add_executable(directconnectserver ${SOURCES})
</pre>
<p>Should change to:</p>
<pre class="cpp" translate="no">
 set(SOURCES
     main<span class="operator">.</span>cpp
     simpleswitch<span class="operator">.</span>cpp
 )
 add_executable(directconnectserver ${SOURCES})
 qt6_add_repc_sources(directconnectserver simpleswitch<span class="operator">.</span>rep)
</pre>
<p>More detailed descriptions for these CMake functions can be found <a href="qtremoteobjects-repc.html#cmake-functions" translate="no">here</a>.</p>
</div>
<!-- @@@remoteobjects-changes-qt6.html -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2023 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br/>    Qt and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of The Qt Company Ltd. in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
